<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Turbine - Turbine Services - Mimetype Service</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Ilkka Priha"></meta><meta name="email" content="ilkka.priha@simsoft.fi"></meta><meta name="author" content="Jason van Zyl"></meta><meta name="email" content="jvanzyl@apache.org"></meta></head><body class="composite"><div id="banner"><a href="http://turbine.apache.org/" id="organizationLogo"><img alt="Apache Software Foundation" src="../images/turbine-project.png"></img></a><a href="http://turbine.apache.org/turbine/turbine-2.3.3/index.html" id="projectLogo"><img alt="turbine-2" src="../images/logo.gif"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 21 November 2008
                <span class="separator">|</span> Doc for  2.3.3
                </div><div class="xright">
        
        <a href="http://turbine.apache.org/">Turbine Home</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/fulcrum/">Fulcrum</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/meta/">META</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menuGeneral_Information"><h5>General Information</h5><ul><li class="none"><a href="../index.html">Overview</a></li><li class="none"><a href="../features.html">Features</a></li><li class="none"><a href="../fsd.html">Specification</a></li><li class="none"><a href="../getting-started.html">Getting Started</a></li></ul></div><div id="menuDocumentation"><h5>Documentation</h5><ul><li class="none"><a href="../changes-report.html">Changes</a></li><li class="none"><a href="../turbine-schema.html">Core DB Schema</a></li><li class="expanded"><a href="../services/index.html">Services</a><ul><li class="none"><a href="../services/assemblerbroker-service.html">Assembler Broker Service</a></li><li class="none"><a href="../services/avalon-component-service.html">Avalon Component Service</a></li><li class="none"><a href="../services/crypto-service.html">Crypto Service</a></li><li class="none"><a href="../services/cache-service.html">Cache Service</a></li><li class="none"><a href="../services/factory-service.html">Factory Service</a></li><li class="none"><a href="../services/intake-service.html">Intake Service</a></li><li class="none"><a href="../services/jsonrpc-service.html">JSON-RPC Service</a></li><li class="none"><a href="../services/jsp-service.html">JSP Service</a></li><li class="none"><a href="../services/localization-service.html">Localization Service</a></li><li class="none"><a href="../services/logging-service.html">Logging Service</a></li><li class="none"><strong><a href="../services/mimetype-service.html">MimeType Service</a></strong></li><li class="none"><a href="../services/naming-service.html">Naming Service</a></li><li class="none"><a href="../services/pool-service.html">Pool Service</a></li><li class="none"><a href="../services/pull-service.html">Pull Service</a></li><li class="none"><a href="../services/resources-service.html">Resources Service</a></li><li class="none"><a href="../services/rundata-service.html">RunData Service</a></li><li class="none"><a href="../services/scheduler-service.html">Scheduler Service</a></li><li class="expanded"><a href="../services/security-service.html">Security Service</a><ul><li class="none"><a href="../services/ldap-security-service.html">LDAP Security Service</a></li><li class="none"><a href="../services/torque-security-service.html">Torque Security Service</a></li><li class="none"><a href="../services/torque-security-schema.html">Torque Security Service Schema</a></li></ul></li><li class="none"><a href="../services/servlet-service.html">Servlet Service</a></li><li class="none"><a href="../services/session-service.html">Session Service</a></li><li class="none"><a href="../services/template-service.html">Template Service</a></li><li class="none"><a href="../services/ui-service.html">UI Service</a></li><li class="none"><a href="../services/uniqueid-service.html">Unique ID Service</a></li><li class="none"><a href="../services/upload-service.html">Upload Service</a></li><li class="none"><a href="../services/velocity-service.html">Velocity Service</a></li><li class="none"><a href="../services/xmlrpc-service.html">XML-RPC Service</a></li><li class="none"><a href="../services/xslt-service.html">XSLT Service</a></li><li class="none"><a href="../services/yaafi-component-service.html">Yaafi Component Service</a></li></ul></li><li class="collapsed"><a href="../howto/index.html">Howtos</a></li><li class="none"><a href="../apidocs/index.html">JavaDocs</a></li></ul></div><div id="menuDevelopment"><h5>Development</h5><ul><li class="none"><a href="../proposals.html">Proposals</a></li><li class="none"><a href="../how-to-help.html">How To Help</a></li><li class="none"><a href="../todo.html">Todo</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="../development-process.html">Development Process</a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/mavenlogo_builtby_w.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Mimetype_Service"></a><h2>Mimetype Service</h2>

<p>
The MimeType Service maintains mappings between MIME types and
the corresponding file name extensions, and between locales and
character encodings. The mappings are typically defined in
properties or files located in user's home directory, Java home
directory or the current class jar depending on the implementation.
</p>

</div><div class="section"><a name="Configuration"></a><h2>Configuration</h2>


    <div class="source"><pre>
# -------------------------------------------------------------------
#
#  S E R V I C E S
#
# -------------------------------------------------------------------
# Classes for Turbine Services should be defined here.
# Format: services.[name].classname=[implementing class]
#
# To specify properties of a service use the following syntax:
# service.[name].[property]=[value]

services.MimeTypeService.classname=org.apache.turbine.services.mimetype.TurbineMimeTypeService
.
.
.
# -------------------------------------------------------------------
#
#  M I M E T Y P E  S E R V I C E
#
# -------------------------------------------------------------------

# This property specifies a file containing mappings between MIME
# content types and the corresponding file name extensions. The
# service itself contains a hardcoded set of most common mappings.
# The file must use the same syntax as the mime.types file of
# the Apache Server, i.e.
# &lt;mimetype&gt; &lt;ext1&gt; &lt;ext2&gt;...
#
#services.MimeTypeService.mime.types=/WEB-INF/conf/mime.types

# This property specifies a file containing mappings between locales
# and the corresponding character encodings. The service itself
# contains a hardcoded set of most common mappings.
# The file should use the Java property file syntax, i.e.
# &lt;lang_country_variant&gt;=&lt;charset&gt;
#
#services.MimeTypeService.charsets=/WEB-INF/conf/charset.properties

</pre></div>
  

</div><div class="section"><a name="Usage"></a><h2>Usage</h2>

<p>
The default RunData implementation uses the MimeType Service internally
when resolving the character encoding of the servlet response. In addition,
applications can use it for customized encoding and content type resolving.
</p>

<p>
The mappings between locales and the corresponding character encodings
are specified using the Java property file syntax, where the locale
specification is the key of the property key and the charset is the value
of the property. The locale specification consists of three parts:
</p>


    <div class="source"><pre>
&lt;lang&gt;_&lt;country&gt;_&lt;variant&gt;
</pre></div>
  

<p>
The variant can be whatever is appropriate for the application, like a
markup language specification, a browser specification, etc. The service
looks for charsets using the following search order:
</p>


    <div class="source"><pre>
&lt;lang&gt;_&lt;country&gt;_&lt;variant&gt;=&lt;charset&gt;
_&lt;country&gt;_&lt;variant&gt;=&lt;charset&gt;
&lt;lang&gt;__&lt;variant&gt;=&lt;charset&gt;
__&lt;variant&gt;=&lt;charset&gt;
&lt;lang&gt;_&lt;country&gt;=&lt;charset&gt;
_&lt;country&gt;=&lt;charset&gt;
&lt;lang&gt;=&lt;charset&gt;
</pre></div>
  

<p>
The service contains defaults for several language mappings and more specific
ones can be specified in an optional property file, e.g. __wml=UTF-8. The name
of the property file can be given with a service property named "charsets".
The service caches results of the search, which should guarantee good performance.
</p>

<p>
The mappings between MIME types and the corresponding file name extensions
are specified using the same syntax as the mime.types file of the Apache Server,
i.e.:
</p>


    <div class="source"><pre>
&lt;mimetype&gt; &lt;ext1&gt; &lt;ext2&gt;...
</pre></div>
  

<p>
The service contains defaults for most common MIME types, like text/plain,
text/html, text/x-hdml, text/vnd.wap.wml, image/gif and image/jpeg. More
specific ones can be specified in an optional MIME types file. The name of
the MIME types file can be given with a service property named "mime.types".
</p>

<p>
The TurbineMimeTypes class is a static accessor for the most common
MimeType Service methods.
</p>

</div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2000-2008, Apache Software Foundation</div><div class="clear"><hr></hr></div></div></body></html>