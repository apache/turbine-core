<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Turbine - Turbine Services - UI Service</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Scott Eade"></meta><meta name="email" content="seade@backstagetech.com.au"></meta></head><body class="composite"><div id="banner"><a href="http://turbine.apache.org/" id="organizationLogo"><img alt="Apache Software Foundation" src="../images/turbine-project.png"></img></a><a href="http://turbine.apache.org/turbine/turbine-2.3.3/index.html" id="projectLogo"><img alt="turbine-2" src="../images/logo.gif"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 21 November 2008
                <span class="separator">|</span> Doc for  2.3.3
                </div><div class="xright">
        
        <a href="http://turbine.apache.org/">Turbine Home</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/fulcrum/">Fulcrum</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/meta/">META</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menuGeneral_Information"><h5>General Information</h5><ul><li class="none"><a href="../index.html">Overview</a></li><li class="none"><a href="../features.html">Features</a></li><li class="none"><a href="../fsd.html">Specification</a></li><li class="none"><a href="../getting-started.html">Getting Started</a></li></ul></div><div id="menuDocumentation"><h5>Documentation</h5><ul><li class="none"><a href="../changes-report.html">Changes</a></li><li class="none"><a href="../turbine-schema.html">Core DB Schema</a></li><li class="expanded"><a href="../services/index.html">Services</a><ul><li class="none"><a href="../services/assemblerbroker-service.html">Assembler Broker Service</a></li><li class="none"><a href="../services/avalon-component-service.html">Avalon Component Service</a></li><li class="none"><a href="../services/crypto-service.html">Crypto Service</a></li><li class="none"><a href="../services/cache-service.html">Cache Service</a></li><li class="none"><a href="../services/factory-service.html">Factory Service</a></li><li class="none"><a href="../services/intake-service.html">Intake Service</a></li><li class="none"><a href="../services/jsonrpc-service.html">JSON-RPC Service</a></li><li class="none"><a href="../services/jsp-service.html">JSP Service</a></li><li class="none"><a href="../services/localization-service.html">Localization Service</a></li><li class="none"><a href="../services/logging-service.html">Logging Service</a></li><li class="none"><a href="../services/mimetype-service.html">MimeType Service</a></li><li class="none"><a href="../services/naming-service.html">Naming Service</a></li><li class="none"><a href="../services/pool-service.html">Pool Service</a></li><li class="none"><a href="../services/pull-service.html">Pull Service</a></li><li class="none"><a href="../services/resources-service.html">Resources Service</a></li><li class="none"><a href="../services/rundata-service.html">RunData Service</a></li><li class="none"><a href="../services/scheduler-service.html">Scheduler Service</a></li><li class="expanded"><a href="../services/security-service.html">Security Service</a><ul><li class="none"><a href="../services/ldap-security-service.html">LDAP Security Service</a></li><li class="none"><a href="../services/torque-security-service.html">Torque Security Service</a></li><li class="none"><a href="../services/torque-security-schema.html">Torque Security Service Schema</a></li></ul></li><li class="none"><a href="../services/servlet-service.html">Servlet Service</a></li><li class="none"><a href="../services/session-service.html">Session Service</a></li><li class="none"><a href="../services/template-service.html">Template Service</a></li><li class="none"><strong><a href="../services/ui-service.html">UI Service</a></strong></li><li class="none"><a href="../services/uniqueid-service.html">Unique ID Service</a></li><li class="none"><a href="../services/upload-service.html">Upload Service</a></li><li class="none"><a href="../services/velocity-service.html">Velocity Service</a></li><li class="none"><a href="../services/xmlrpc-service.html">XML-RPC Service</a></li><li class="none"><a href="../services/xslt-service.html">XSLT Service</a></li><li class="none"><a href="../services/yaafi-component-service.html">Yaafi Component Service</a></li></ul></li><li class="collapsed"><a href="../howto/index.html">Howtos</a></li><li class="none"><a href="../apidocs/index.html">JavaDocs</a></li></ul></div><div id="menuDevelopment"><h5>Development</h5><ul><li class="none"><a href="../proposals.html">Proposals</a></li><li class="none"><a href="../how-to-help.html">How To Help</a></li><li class="none"><a href="../todo.html">Todo</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="../development-process.html">Development Process</a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/mavenlogo_builtby_w.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="UI_Service"></a><h2>UI Service</h2>

<p>
The UI (User Interface) Service allows your Turbine application to be skinned
using simple properties files that are located in the WEBAPP/resources/ui/skins/
directory hierarchy.
</p>

<p>
The service and its associated pull tool provide the following enhancements over
the old UIManager pull tool (which has been deprecated as od Turbine 2.3.3):
</p>
<ul>
<li>Skin properties are shared between all users with lazy loading.</li>
<li>Non-default skin files inherit properties from the default skin</li>
<li>Access to skin properties from screen and action classes is now provided for</li>
<li>Access is provided to the list of available skins</li>
</ul>

</div><div class="section"><a name="Configuration"></a><h2>Configuration</h2>


    <div class="source"><pre>
# -------------------------------------------------------------------
#
#  S E R V I C E S
#
# -------------------------------------------------------------------
...
services.UIService.classname = org.apache.turbine.services.ui.TurbineUIService
...

# -------------------------------------------------------------------
#
#  P U L L  S E R V I C E
#
# -------------------------------------------------------------------
...
## session scope allows us to pul the name of the selected skin from user.Temp
## If you wanted the same skin to apply for all users you could use global scope.
tool.session.ui = org.apache.turbine.services.pull.tools.UITool
tool.ui.skin = default
...
</pre></div>
  

<p>
Skin properties are defined in WEBAPP/resources/ui/skins/, the following might
exist in a file WEBAPP/resources/ui/skins/default/skin.props:
</p>


    <div class="source"><pre>
checkedImage = check.gif
checkedImageAltText = Tick
label_Introduction = Introduction
l10n_label_introduction = introduction
</pre></div>
  

<p>
and the following might
exist in a file WEBAPP/resources/ui/skins/custom_skin_1/skin.props:
</p>


    <div class="source"><pre>
checkedImage = check-blue.gif
checkedImageAltText = Blue tick
label_Introduction = Summary
l10n_label_introduction = summary
</pre></div>
  

</div><div class="section"><a name="Usage"></a><h2>Usage</h2>

<p>
Retrieving a value from a skin is as simple as (where user.getSkin() returns the
name of the currently selected skin):
</p>


    <div class="source"><pre>
TurbineUI.get(user.getSkin(), "label_Introduction")
</pre></div>
  

<p>
or in a template (the current skin is retrieved from user.Temp):
</p>


    <div class="source"><pre>
$ui.label_Introduction
</pre></div>
  

<p>
Images, css and javascript files are stored under the skin directory also and
can be accessed thus:
</p>


    <div class="source"><pre>
#set($imageurl = $ui.image($imageName))
## Filename is skin.css
#set($cssurl = $ui.getStylecss())
#set($jsurl = $ui.getScript($filename))
</pre></div>
  

<p>
You can retrieve an array containing the names of the available skins thus:
</p>


    <div class="source"><pre>
  String[] availableSkins = TurbineUI.getSkinNames();
</pre></div>
  

<p>
or in a template:
</p>


    <div class="source"><pre>
  #set($availablekins = $ui.SkinNames)
</pre></div>
  

<p>
You can combine skinning and <a href="localization-service.html">localization</a>
thus:
</p>


    <div class="source"><pre>
## Retrieve the localized label_introduction or label_summary depending on the
## selected skin
$l10n.get("label_$ui.l10n_label_introduction")
</pre></div>
  

<p>
Please refer to the JavaDocs for the org.apache.turbine.services.ui package for
further details.
</p>

</div><div class="section"><a name="Properties"></a><h2>Properties</h2>
<p>
You can configure the UI Service using the following properties:
</p>

<table class="bodyTable">
<tr class="a">
<th>Property</th>
<th>Default</th>
<th>Function</th>
</tr>
<tr class="b">
<td>tool.ui.dir.skin</td>
<td>/ui/skins</td>
<td>The name of the skin directory that is to be used for the web application.</td>
</tr>
<tr class="a">
<td>tool.ui.skin</td>
<td>default</td>
<td>The name of the default skin that is to be used for the web application.</td>
</tr>
<tr class="b">
<td>tool.ui.dir.image</td>
<td>/images</td>
<td>The name of the image directory inside the skin that is to be used for the
 web application.</td>
</tr>
<tr class="a">
<td>tool.ui.css</td>
<td>skin.css</td>
<td>The name of the css file that is to be used for the web application.</td>
</tr>

<tr class="b">
<td>tool.ui.want.relative</td>
<td>false</td>
<td>You can configure the UI Service to return relative links for the web
 application by setting this to <code>true</code>.</td>
</tr>
</table>

<p>
Note that the name of the file within the skin directory that actually contains
the name/value pairs for the skin is fixed at <em>skin.props</em>.
</p>

</div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2000-2008, Apache Software Foundation</div><div class="clear"><hr></hr></div></div></body></html>