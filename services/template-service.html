<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from xdocs/services\template-service.xml at 12 February 2024
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Apache Turbine &#x2013; Turbine Services - Template Service</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.9.min.js"></script>
<link rel="icon" type="image/png" sizes="48x48" href="./images/favicon.ico"> 
      <link rel="icon" type="image/png" sizes="48x48" href="../images/favicon.ico"> 
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/apache/turbine-core">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../../" id="bannerLeft" title="Apache Turbine"><img src="../images/turbine-project-apache-separate.png"  alt="Apache Turbine"/></a></div>
          <div class="pull-right"><div id="bannerRight"><img src="../images/logo.gif"  alt=""/></div>
</div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 12 February 2024<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 6.1-SNAPSHOT</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://turbine.apache.org/fulcrum/" class="externalLink" title="Fulcrum">Fulcrum</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://turbine.apache.org/" class="externalLink" title="Turbine">Turbine</a></li>
      <li class="pull-right"><a href="https://www.apache.org" class="externalLink" title="Apache">Apache</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">General Information</li>
    <li><a href="../index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="../features.html" title="Features"><span class="none"></span>Features</a></li>
    <li><a href="../fsd.html" title="Specification"><span class="none"></span>Specification</a></li>
    <li><a href="../getting-started.html" title="Getting Started"><span class="none"></span>Getting Started</a></li>
    <li><a href="../how-to-build.html" title="Howto Build Turbine"><span class="none"></span>Howto Build Turbine</a></li>
    <li><a href="../changes-report.html" title="Changes"><span class="none"></span>Changes</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../services/index.html" title="Services"><span class="icon-chevron-down"></span>Services</a>
     <ul class="nav nav-list">
      <li><a href="../services/assemblerbroker-service.html" title="Assembler Broker Service"><span class="none"></span>Assembler Broker Service</a></li>
      <li><a href="../services/avalon-component-service.html" title="Avalon Component Service"><span class="none"></span>Avalon Component Service</a></li>
      <li><a href="../../fulcrum/fulcrum-crypto/" title="Crypto Service"><span class="none"></span>Crypto Service</a></li>
      <li><a href="../../fulcrum/fulcrum-cache/" title="Cache Service"><span class="none"></span>Cache Service</a></li>
      <li><a href="../../fulcrum/fulcrum-factory/" title="Factory Service"><span class="none"></span>Factory Service</a></li>
      <li><a href="../../fulcrum/fulcrum-intake/" title="Intake Service"><span class="none"></span>Intake Service</a></li>
      <li><a href="../services/jsonrpc-service.html" title="JSON-RPC Service"><span class="none"></span>JSON-RPC Service</a></li>
      <li><a href="../../fulcrum/fulcrum-json/" title="JSON Service"><span class="none"></span>JSON Service</a></li>
      <li><a href="../services/jsp-service.html" title="JSP Service"><span class="none"></span>JSP Service</a></li>
      <li><a href="../../fulcrum/fulcrum-localization/" title="Localization Service"><span class="none"></span>Localization Service</a></li>
      <li><a href="../../fulcrum/fulcrum-mimetype/" title="MimeType Service"><span class="none"></span>MimeType Service</a></li>
      <li><a href="../services/naming-service.html" title="Naming Service"><span class="none"></span>Naming Service</a></li>
      <li><a href="../../fulcrum/fulcrum-parser/" title="Parser Service"><span class="none"></span>Parser Service</a></li>
      <li><a href="../../fulcrum/fulcrum-pool/" title="Pool Service"><span class="none"></span>Pool Service</a></li>
      <li><a href="../services/pull-service.html" title="Pull Service"><span class="none"></span>Pull Service</a></li>
      <li><a href="../services/rundata-service.html" title="RunData Service"><span class="none"></span>RunData Service</a></li>
      <li><a href="../services/scheduler-service.html" title="Scheduler Service"><span class="none"></span>Scheduler Service</a></li>
      <li><a href="../services/security-service.html" title="Security Service"><span class="none"></span>Security Service</a></li>
      <li><a href="../services/servlet-service.html" title="Servlet Service"><span class="none"></span>Servlet Service</a></li>
      <li><a href="../services/session-service.html" title="Session Service"><span class="none"></span>Session Service</a></li>
      <li class="active"><a href="#"><span class="none"></span>Template Service</a></li>
      <li><a href="../services/ui-service.html" title="UI Service"><span class="none"></span>UI Service</a></li>
      <li><a href="../services/uniqueid-service.html" title="Unique ID Service"><span class="none"></span>Unique ID Service</a></li>
      <li><a href="../services/urlmapper-service.html" title="URL Mapper Service"><span class="none"></span>URL Mapper Service</a></li>
      <li><a href="../../fulcrum/fulcrum-upload/" title="Upload Service"><span class="none"></span>Upload Service</a></li>
      <li><a href="../services/velocity-service.html" title="Velocity Service"><span class="none"></span>Velocity Service</a></li>
      <li><a href="../../fulcrum/fulcrum-xmlrpc/" title="XML-RPC Service"><span class="none"></span>XML-RPC Service</a></li>
      <li><a href="../../fulcrum/fulcrum-xslt/" title="XSLT Service"><span class="none"></span>XSLT Service</a></li>
     </ul></li>
    <li><a href="../howto/index.html" title="Howtos"><span class="icon-chevron-right"></span>Howtos</a></li>
    <li><a href="https://cwiki.apache.org/confluence/display/TURBINE" class="externalLink" title="Wiki"><span class="none"></span>Wiki</a></li>
    <li><a href="../apidocs/index.html" title="JavaDocs"><span class="none"></span>JavaDocs</a></li>
   <li class="nav-header">Development</li>
    <li><a href="../proposals.html" title="Proposals"><span class="none"></span>Proposals</a></li>
    <li><a href="../how-to-help.html" title="How To Help"><span class="none"></span>How To Help</a></li>
    <li><a href="../todo.html" title="Todo"><span class="none"></span>Todo</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Apache</li>
    <li><a href="https://www.apache.org/" class="externalLink" title="Apache Website"><span class="none"></span>Apache Website</a></li>
    <li><a href="https://www.apache.org/licenses/" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works"><span class="none"></span>How the ASF works</a></li>
    <li><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship"><span class="none"></span>Sponsorship</a></li>
    <li><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks"><span class="none"></span>Thanks</a></li>
    <li><a href="https://www.apache.org/security/" class="externalLink" title="Security"><span class="none"></span>Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
<form id="search-form" action="https://www.google.com/search" method="get" >
  <input value="http://turbine.apache.org/turbine-core" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script>asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >


 

<section>
<h2><a name="Template_Service"></a>Template Service</h2>


<p>
</p>

</section>

<section>
<h2><a name="Configuration"></a>Configuration</h2>


<div class="source"><pre class="prettyprint">
# -------------------------------------------------------------------
#
#  S E R V I C E S
#
# -------------------------------------------------------------------
# Classes for Turbine Services should be defined here.
# Format: services.[name].classname=[implementing class]
#
# To specify properties of a service use the following syntax:
# service.[name].[property]=[value]

services.TemplateService.classname=org.apache.turbine.services.template.TurbineTemplateService
.
.
.
# -------------------------------------------------------------------
#
#  T E M P L A T E  S E R V I C E
#
# -------------------------------------------------------------------

# Roughly, the number of templates in each category.
#
# Defaults: layout=2, navigation=10, screen=50

services.TemplateService.layout.cache.size=2
services.TemplateService.navigation.cache.size=10
services.TemplateService.screen.cache.size=50

#
# These are the mapper classes responsible for the lookup of Page, Screen, Layout and Navigation classes according
# to the supplied template Name. They also map template names on the Layout and Screen file names to be used.
#
services.TemplateService.mapper.page.class                = org.apache.turbine.services.template.mapper.DirectMapper
services.TemplateService.mapper.screen.class              = org.apache.turbine.services.template.mapper.ClassMapper
services.TemplateService.mapper.layout.class              = org.apache.turbine.services.template.mapper.ClassMapper
services.TemplateService.mapper.navigation.class          = org.apache.turbine.services.template.mapper.ClassMapper
services.TemplateService.mapper.layout.template.class     = org.apache.turbine.services.template.mapper.LayoutTemplateMapper
services.TemplateService.mapper.screen.template.class     = org.apache.turbine.services.template.mapper.ScreenTemplateMapper
services.TemplateService.mapper.navigation.template.class = org.apache.turbine.services.template.mapper.DirectTemplateMapper

</pre></div>

</section>

<section>
<h2><a name="Usage"></a>Usage</h2>

<p>The Template Service itself can't render View pages. It is responsible for
matching actual Template Files and Java classes to passed template names. Template
names are &quot;,&quot; separated entities which describe a template screen to be displayed.
</p>


<p>Note: In all of the following examples, it is assumed that you use
the <a href="velocity-service.html">VelocityService</a> as
your preferred view service. So if you read &quot;Velocity&quot; in the
following paragraphs, this means &quot;default configured view
class&quot;. Currently, Turbine includes two supported view services,
<a href="velocity-service.html">Velocity</a> and
<a href="jsp-service.html">Java Server Pages (JSP)</a>.
</p>


<p>
  If you want to render a template, a search path is used to find
  a Java class which might provide information for the context of
  this template.
</p>


<p><u>The two golden rules when using Templates with Turbine</u></p>


<ul>
  
<li>1) Many examples and docs from older Turbine code show template
         paths with a slashes.<br />
         Repeat after me: <b>TEMPLATE NAMES NEVER CONTAIN SLASHES!</b><br />
         Template names are separated by &quot;,&quot; (the colon). </li>
  
<li>2) Many examples and docs from older Turbine code show templates
         that start with &quot;/&quot;. This is not only a violation of the rule
         above but actively breaks things like loading templates from
         a jar with the velocity jar loader.<br />
         Repeat after me: <b>TEMPLATE NAMES ARE NOT PATHS. THEY'RE NOT ABSOLUTE AND HAVE NO LEADING /</b>.</li>
</ul>


<p>
  If you keep these rules in mind when writing template names, you will never have
  trouble loading a template.
</p>


<p>
  If you request e.g. the template screen &quot;about,directions,Driving.vm&quot;
  then the following class names are searched (on the module search
  path):
</p>


<ul>
  
<li>1. about.directions.Driving     &lt;- direct matching the template to the class name</li>
  
<li>2. about.directions.Default     &lt;- matching the package, class name is Default</li>
  
<li>3. about.Default                &lt;- stepping up in the package hierarchy, looking for Default</li>
  
<li>4. Default                      &lt;- Class called &quot;Default&quot; without package</li>
  
<li>5. VelocityScreen               &lt;- The class configured by the Service (VelocityService) to use</li>
</ul>


<p>
  And if you have the following module packages configured in your TurbineResources.properties:
  &quot;module.packages = org.apache.turbine.modules, com.mycorp.modules&quot;,
  then the class loader will look for
</p>


<ul>
  
<li>org.apache.turbine.modules.screens.about.directions.Driving</li>
  
<li>com.mycorp.modules.screens.about.directions.Driving</li>
  
<li>org.apache.turbine.modules.screens.about.directions.Default</li>
  
<li>com.mycorp.modules.screens.about.directions.Default</li>
  
<li>org.apache.turbine.modules.screens.about.Default</li>
  
<li>com.mycorp.modules.screens.about.Default</li>
  
<li>org.apache.turbine.modules.screens.Default</li>
  
<li>com.mycorp.modules.screens.Default</li>
  
<li>org.apache.turbine.modules.screens.VelocityScreen</li>
  
<li>com.mycorp.modules.screens.VelocityScreen</li>
</ul>


<p>
  Most of the times, you don't have any backing Java class for a
  template screen, so the first match will be
  org.apache.turbine.modules.screens.VelocityScreen
  which then renders your screen.
</p>


<p>
  Please note, that your Screen Template (Driving.vm) must exist!
  If it does not exist, the Template Service will report an error.
</p>


<p>
  Once the screen is found, the template service will look for
  the Layout and Navigation templates of your Screen. Here, the
  template service looks for matching template names!
</p>


<p>
  Consider our example:  about,directions,Driving.vm (Screen Name)
</p>


<p>
  Now the template service will look for the following Navigation
  and Layout templates:
</p>


<ul>
  
<li>1. about,directions,Driving.vm      &lt;- exact match</li>
  
<li>2. about,directions,Default.vm      &lt;- package match, Default name</li>
  
<li>3. about,Default.vm                 &lt;- stepping up in the hierarchy</li>
  
<li>4. Default.vm                       &lt;- The name configured as default.layout.template in the Velocity service.</li>
</ul>


<p>
  If you now wonder how a template name is mapped to an actual file name: This is
  scope of the templating engine. <a href="velocity-service.html">Velocity</a>
  e.g. has this wonderful option to load templates from jar archives.
  There is no file but if you tell velocity &quot;get about,directions,Driving.vm&quot; and it
  returns the rendered template. So getting the actual template is not the job of the
  Templating Service but of the Template rendering services.
</p>
</section>

<section>
<h2><a name="Properties"></a>Properties</h2>

<p>
  The mapping of classes and template paths to template names is configured in
  mapper classes. These are pluggable and can be exchanged to configure other mapping
  policies. This is an option for seasoned Turbine developers and the default policy
  shouldn't be changed lightly.
</p>


<ul>
  
<li>
    services.TemplateService.mapper.page.class configures the mapper
    used for finding a page class suitable for the supplied template
    name. Default is org.apache.turbine.services.template.mapper.DirectMapper
  </li>
  
<li>
    services.TemplateService.mapper.screen.class configures the mapper
    used for finding a screen class suitable for the supplied template
    name. Default is org.apache.turbine.services.template.mapper.ClassMapper
  </li>
  
<li>
    services.TemplateService.mapper.layout.class configures the mapper
    used for finding a layout class suitable for the supplied template
    name. Default is org.apache.turbine.services.template.mapper.ClassMapper
  </li>
  
<li>
    services.TemplateService.mapper.navigation.class configures the
    mapper used for finding navigation classes suitable for the
    supplied template name. This mapper is not used directly but from
    various navigation helpers like TemplateNavigation. Default is
    org.apache.turbine.services.template.mapper.ClassMapper
  </li>
  
<li>
    services.TemplateService.mapper.layout.template.class configures
    the mapper used for finding a layout template to render your
    screen. This template is used by your Layout class (see above) to
    position the various visual elements like content and navigation
    on the Page. Default is org.apache.turbine.services.template.mapper.LayoutTemplateMapper
  </li>
  
<li>
    services.TemplateService.mapper.screen.template.class configures
    the mapper used for finding your screen template. This is used
    whenever a screen class is requesting a template to
    render. Default is org.apache.turbine.services.template.mapper.ScreenTemplateMapper
  </li>
  
<li>
    services.TemplateService.mapper.navigation.template.class configures
    the mapper used for finding your navigation template. This is used
    whenever a navigation class is requesting a template to
    render. Default is org.apache.turbine.services.template.mapper.DirectTemplateMapper
  </li>
</ul>
</section>


        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2000&#x2013;2024
<a href="https://www.apache.org/">The Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
