<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from xdocs/howto\annotations.xml at 18 June 2019 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Apache Turbine &#x2013; Annotations Howto</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    
  </head>
  <body class="composite">
    <div id="banner">
<a href="../../../" id="bannerLeft" title="Apache Turbine"><img src="../images/turbine-project-apache-separate.png"  alt="Apache Turbine"/></a>
<div id="bannerRight">
<img src="../images/logo.gif"  alt=""/></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 18 June 2019</span>
          &nbsp;| <span id="projectVersion">Version: 5.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a> |
<a href="../../../" title="Turbine">Turbine</a> |
<a href="../../../fulcrum/" title="Fulcrum">Fulcrum</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>General Information</h5>
    <ul>
     <li class="none"><a href="../index.html" title="Overview">Overview</a></li>
     <li class="none"><a href="../features.html" title="Features">Features</a></li>
     <li class="none"><a href="../fsd.html" title="Specification">Specification</a></li>
     <li class="none"><a href="../getting-started.html" title="Getting Started">Getting Started</a></li>
     <li class="none"><a href="../how-to-build.html" title="Howto Build Turbine">Howto Build Turbine</a></li>
     <li class="none"><a href="../changes-report.html" title="Changes">Changes</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../services/index.html" title="Services">Services</a></li>
     <li class="expanded"><a href="../howto/index.html" title="Howtos">Howtos</a>
      <ul>
       <li class="none"><a href="../howto/action-event-howto.html" title="Action Events Howto">Action Events Howto</a></li>
       <li class="none"><strong>Annotations Howto</strong></li>
       <li class="none"><a href="../howto/configuration-howto.html" title="Configuration Howto">Configuration Howto</a></li>
       <li class="none"><a href="../howto/extend-user-howto.html" title="Extend User Howto">Extend User Howto</a></li>
       <li class="none"><a href="../howto/hibernate-howto.html" title="Hibernate OM Howto">Hibernate OM Howto</a></li>
       <li class="none"><a href="../howto/intake-howto.html" title="Intake Howto">Intake Howto</a></li>
       <li class="none"><a href="../howto/jsp-howto.html" title="JSP Howto">JSP Howto</a></li>
       <li class="none"><a href="../howto/migrate-from-2_1-howto.html" title="Migrating from 2.1 to 2.2">Migrating from 2.1 to 2.2</a></li>
       <li class="none"><a href="../howto/migrate-from-2_2-howto.html" title="Migrating from 2.2 to 2.3">Migrating from 2.2 to 2.3</a></li>
       <li class="none"><a href="../howto/migrate-from-2_3-howto.html" title="Migrating from 2.3 to 4.0">Migrating from 2.3 to 4.0</a></li>
       <li class="none"><a href="../howto/migrate-from-4_0-howto.html" title="Migrating from 4.0 to 5.0">Migrating from 4.0 to 5.0</a></li>
       <li class="none"><a href="../howto/pullmodel-howto.html" title="Pull Model Howto">Pull Model Howto</a></li>
       <li class="none"><a href="../howto/python-howto.html" title="Python Howto">Python Howto</a></li>
       <li class="none"><a href="../howto/security-howto.html" title="Security Howto">Security Howto</a></li>
       <li class="none"><a href="../howto/services-howto.html" title="Services Howto">Services Howto</a></li>
       <li class="none"><a href="../howto/url-rewriting-howto.html" title="URL rewriting Howto">URL rewriting Howto</a></li>
       <li class="none"><a href="../howto/context-howto.html" title="Velocity Context Howto">Velocity Context Howto</a></li>
       <li class="none"><a href="../howto/velocity-site-howto.html" title="Velocity Site Howto">Velocity Site Howto</a></li>
       <li class="none"><a href="../howto/velocityonlylayout-howto.html" title="VelocityOnlyLayout Howto">VelocityOnlyLayout Howto</a></li>
      </ul></li>
     <li class="none"><a href="http://wiki.apache.org/turbine/FrontPage" class="externalLink" title="Wiki">Wiki</a></li>
     <li class="none"><a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a></li>
    </ul>
       <h5>Development</h5>
    <ul>
     <li class="none"><a href="../proposals.html" title="Proposals">Proposals</a></li>
     <li class="none"><a href="../how-to-help.html" title="How To Help">How To Help</a></li>
     <li class="none"><a href="../todo.html" title="Todo">Todo</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
       <h5>Apache</h5>
    <ul>
     <li class="none"><a href="http://www.apache.org/" class="externalLink" title="Apache Website">Apache Website</a></li>
     <li class="none"><a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a></li>
     <li class="none"><a href="http://www.apache.org/security/" class="externalLink" title="Security">Security</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">


 

<div class="section">
<h2><a name="Annotations"></a>Annotations</h2>


<p>
Turbine provides a number of annotations to inject dependencies into your actions,
screens and layouts. All <tt>Assemblers</tt> that is, all modules of type
<tt>Action</tt>, <tt>Screen</tt>, <tt>Layout</tt>, <tt>Page</tt>,
<tt>Navigation</tt> and <tt>ScheduledJob</tt> as well as all
<tt>Valves</tt> in the pipeline support the injection of services,
configurations and loaders. This relieves you from the burden of looking
them up at runtime and thus simplifies and accelerates the code.
</p>


<div class="section">
<h3><a name="a.40TurbineService"></a>@TurbineService</h3>
The annotation can only be used with a field.
A declared field in a class annotated with <tt>@TurbineService</tt>
gets injected an instance of this service at the time the instance
of the class is created. The field should have the type of the service
interface like in the following two examples:

<div class="source">
<pre>
// Explicit service name
@TurbineService( &quot;RunDataService&quot; )
private RunDataService runDataService;

// Implicit SERVICE_NAME or ROLE
@TurbineService
private FactoryService factory;
</pre></div>
This is the equivalent of

<div class="source">
<pre>
runDataService = (RunDataService) TurbineServices
    .getInstance().getService(&quot;RunDataService&quot;);

factory = (FactoryService) TurbineServices
    .getInstance().getService(FactoryService.ROLE);
</pre></div>
As you an see, the annotation supports an optional parameter, the
name of the service in the Turbine service repository. If this
parameter is not present, the annotation processor will look
for the field <tt>SERVICE_NAME</tt> and then <tt>ROLE</tt>
in the type class of the field to retrieve the service name. If none
of them can be found, the fully qualified class name of the
service interface is used to look up the service.
<br />
If the service instance cannot be found, the annotation processor
will throw an exception.
</div>


<div class="section">
<h3><a name="a.40TurbineConfiguration"></a>@TurbineConfiguration</h3>
The annotation can only be used with a field.
If a declared field of the type <tt>Configuration</tt> is annotated
with <tt>@TurbineConfiguration</tt>, Turbine will inject an instance
of the Turbine configuration object at the time the instance of the class
is created.

<div class="source">
<pre>
// Injected configuration instance
@TurbineConfiguration
private Configuration config;

// Injected configuration subset instance
@TurbineConfiguration( &quot;action&quot; )
private Configuration actionConfig;
</pre></div>
This is the equivalent of

<div class="source">
<pre>
config = Turbine.getConfiguration();

actionConfig = Turbine.getConfiguration().subset(&quot;action&quot;);
</pre></div>
The annotation supports an optional parameter, the
prefix of the configuration subset to retrieve.
<br />
If other fields having simple types are annotated with
<tt>@TurbineConfiguration</tt>, Turbine will inject the corresponding
configuration value. In this case, the annotation parameter defines the
configuration key and is required. Strings, Lists and most simple types
are supported. The value will only be set if the key is found in the
configuration, so that the field can be initialized with a default value.

<div class="source">
<pre>
// Injected configuration value
@TurbineConfiguration( &quot;module.cache&quot; )
private boolean moduleCache = true;

@TurbineConfiguration( &quot;template.homepage&quot; )
private String templateHomepage;
</pre></div>
This is the equivalent of

<div class="source">
<pre>
moduleCache = Turbine.getConfiguration().getBoolean(&quot;module.cache&quot;, true);
templateHomepage = Turbine.getConfiguration().getString(&quot;template.homepage&quot;);
</pre></div>
</div>


<div class="section">
<h3><a name="a.40TurbineLoader"></a>@TurbineLoader</h3>
The annotation can only be used with a field.
A declared field in a class annotated with <tt>@TurbineLoader</tt>
gets injected an instance of the specified <tt>Loader</tt> at
the time the instance of the class is created. The field should have
the type of the loader.

<div class="source">
<pre>
// Injected loader instance
@TurbineLoader( Action.class )
private ActionLoader actionLoader;
</pre></div>
This is the equivalent of

<div class="source">
<pre>
actionLoader = TurbineAssemblerBroker.getLoader(Action.class);
</pre></div>
The annotation parameter is required and defines the type of module
that is to be loaded.
</div>


<div class="section">
<h3><a name="a.40TurbineActionEvent"></a>@TurbineActionEvent</h3>
The annotation can only be used with a method.
A method in a class annotated with <tt>@TurbineActionEvent</tt>
is associated to a named action event. The annotation parameter
is required and defines the name of the event. See the
<a href="action-event-howto.html">Action Events Howto</a>
for usage and examples.
</div>


<div class="section">
<h3><a name="Performance_Considerations"></a>Performance Considerations</h3>
It is important to note that the processing of the annotations at
the time the module class is instantiated takes some time. It is
therefore strongly recommended to re-use the module instances in
a production environment by setting the configuration parameter
<tt>module.cache</tt> to <tt>true</tt> in
<tt>TurbineResources.properties</tt>.
</div>

</div>



      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2000&#x2013;2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>