<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 21 December 2015 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Apache Turbine - 
  URL Rewriting Howto</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20151221" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../../" id="bannerLeft" title="Apache Turbine">
                                                <img src="../images/turbine-project.png" alt="Apache Turbine" />
                </a>
                          <div id="bannerRight">
                                                <img src="../images/logo.gif" alt="Apache Turbine" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 21 December 2015</span>
                  &nbsp;| <span id="projectVersion">Version: 4.0-M2</span>
                      </div>
            <div class="xright">                    <a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a>
            |
                        <a href="../../../" title="Turbine">Turbine</a>
            |
                        <a href="../../../fulcrum/" title="Fulcrum">Fulcrum</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>General Information</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../fsd.html" title="Specification">Specification</a>
            </li>
                  <li class="none">
                          <a href="../getting-started.html" title="Getting Started">Getting Started</a>
            </li>
                  <li class="none">
                          <a href="../how-to-build.html" title="Howto Build Turbine">Howto Build Turbine</a>
            </li>
                  <li class="none">
                          <a href="../changes-report.html" title="Changes">Changes</a>
            </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="../services/index.html" title="Services">Services</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                <li class="expanded">
                          <a href="../howto/index.html" title="Howtos">Howtos</a>
                    <ul>
                      <li class="none">
                          <a href="../howto/action-event-howto.html" title="Action Events Howto">Action Events Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/annotations.html" title="Annotations Howto">Annotations Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/configuration-howto.html" title="Configuration Howto">Configuration Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/extend-user-howto.html" title="Extend User Howto">Extend User Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/hibernate-howto.html" title="Hibernate OM Howto">Hibernate OM Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/intake-howto.html" title="Intake Howto">Intake Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/jsp-howto.html" title="JSP Howto">JSP Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/migrate-from-2_1-howto.html" title="Migrating from 2.1 to 2.2">Migrating from 2.1 to 2.2</a>
            </li>
                      <li class="none">
                          <a href="../howto/migrate-from-2_2-howto.html" title="Migrating from 2.2 to 2.3">Migrating from 2.2 to 2.3</a>
            </li>
                      <li class="none">
                          <a href="../howto/migrate-from-2_3-howto.html" title="Migrating from 2.3 to 4.0">Migrating from 2.3 to 4.0</a>
            </li>
                      <li class="none">
                          <a href="../howto/pullmodel-howto.html" title="Pull Model Howto">Pull Model Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/python-howto.html" title="Python Howto">Python Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/security-howto.html" title="Security Howto">Security Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/services-howto.html" title="Services Howto">Services Howto</a>
            </li>
                      <li class="none">
            <strong>URL rewriting Howto</strong>
          </li>
                      <li class="none">
                          <a href="../howto/context-howto.html" title="Velocity Context Howto">Velocity Context Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/velocity-site-howto.html" title="Velocity Site Howto">Velocity Site Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/velocityonlylayout-howto.html" title="VelocityOnlyLayout Howto">VelocityOnlyLayout Howto</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/turbine/FrontPage" class="externalLink" title="Wiki">Wiki</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
          </ul>
                       <h5>Development</h5>
                  <ul>
                  <li class="none">
                          <a href="../proposals.html" title="Proposals">Proposals</a>
            </li>
                  <li class="none">
                          <a href="../how-to-help.html" title="How To Help">How To Help</a>
            </li>
                  <li class="none">
                          <a href="../todo.html" title="Todo">Todo</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Apache</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apache.org/" class="externalLink" title="Apache Website">Apache Website</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/security/" class="externalLink" title="Security">Security</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License. -->

 

<div class="section">
<h2>Scenario and Overview<a name="Scenario_and_Overview"></a></h2>


<p>
Unaltered Turbine URLs look like this:
<tt>http://www.foo.com:8080/CONTEXT/servlet/MAPPING/template/Foo.vm</tt>.<br />
But you want shorter URLs, or you don't like exposing the use of
servlets in the URL.  Maybe this url would suit you better:
<tt>http://www.foo.com:8080/po/s/la/template/Foo.vm</tt>
</p>


<p>
The bulk of the url is defined by the servlet api and is outside of the
control of Turbine:
</p>
<div>
<pre>
http://www.foo.com/CONTEXT/servlet/MAPPING/template/Foo.vm
                   [ servlet api defined ][ turbine       ]</pre></div>

This HOWTO describes how you can control the servlet part of the url
in Tomcat.  For other servlet environments you'll have to consult
their documentation.



<p>
Three parts of the url will be addresed:
</p>
<ol style="list-style-type: decimal">

<li>the web application context (CONTEXT in the example above),</li>

<li>the servlet prefix (servlet),</li>

<li>and the servlet mapping (MAPPING).</li>
</ol>


</div>


<div class="section">
<h2>The Context<a name="The_Context"></a></h2>


<p>
You need to register the context with Tomcat. If you have given your
application a short name like 'po' and placed it correctly in the
webapps directory, then you won't need to do anything special. Tomcat
will find the directory, and add a context. If you have a long
application name like 'mywonderfulapp', add the following lines to
Tomcat's server.xml file:
</p>


<div class="source">
<pre>
&lt;Context
    path=&quot;/po&quot;
    docBase=&quot;webapps/mywonderfulapp&quot;
    reloadable=&quot;true&quot;
    debug=&quot;0&quot;
    trusted=&quot;false&quot; &gt;
&lt;/Context&gt;
</pre></div>


<p>
Everthing after the docBase= line is obviously up to you. This tells
Tomcat to add a context named 'po' with the docbase of your
application.
</p>

</div>


<div class="section">
<h2>The Servlet Prefix<a name="The_Servlet_Prefix"></a></h2>


<p>
Modifying the servlet prefix also requires editing Tomcat's server.xml
file.  Tomcat will use this prefix to determine if a given request is
for a servlet.  Edit the following lines:
</p>


<div class="source">
<pre>
&lt;RequestInterceptor
    className=&quot;org.apache.tomcat.request.InvokerInterceptor&quot;
    debug=&quot;0&quot; prefix=&quot;/s/&quot; /&gt;
</pre></div>


<p>
With this modification, Tomcat recognize requests containing /s/ in
the url as a servlet request and will look for the servlet in the
web.xml descriptor.
</p>

</div>


<div class="section">
<h2>The Servlet Name<a name="The_Servlet_Name"></a></h2>

<p>
This is defined in web.xml (which you will find here:
<tt>webapps/WEB-INF/web.xml</tt>).  This is automatically given
the name of your application in Turbine.  To change it, simply edit the
web.xml file as follows:
</p>


<div class="source">
<pre>
&lt;servlet-name&gt;
    la
&lt;/servlet-name&gt;
</pre></div>


<p>
<b>If you are using Tomcat standalone, then you are done and your url is
now <tt>http://servername:port:/po/s/la</tt></b>
</p>

</div>


<div class="section">
<h2>If you are running Apache and mod_jk<a name="If_you_are_running_Apache_and_mod_jk"></a></h2>


<p>
... you will need to change your mod_jk.conf file to include the following:
</p>


<div class="source">
<pre>
#########################################################
# Auto configuration for the /po context starts.
#########################################################

#
# Make Apache aware of the location of the context
#
Alias /po &quot;serverroot/webapps/mywonderfulapp&quot;
&lt;Directory &quot;serverroot/webapps/mywonderfulapp&quot;&gt;
     Options Indexes FollowSymLinks
&lt;/Directory&gt;

#
# Mount all JSP files and the /servlet/ uri to Tomcat
#
JkMount /po/s/* ajp12
JkMount /po/*.jsp ajp12

#
# Prohibit users from directly accessing WEB-INF
#
&lt;Location &quot;/mywonderfulapp/WEB-INF/&quot;&gt;
     AllowOverride None
     deny from all
&lt;/Location&gt;

#
# Prohibit users from directly accessing META-INF
#
&lt;Location &quot;/mywonderfulapp/META-INF/&quot;&gt;
     AllowOverride None
     deny from all
&lt;/Location&gt;

#######################################################
# Auto configuration for the /po context ends.
#######################################################
</pre></div>


<p>
document created August 14, 2001
</p>

</div>



      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2000-2015
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>