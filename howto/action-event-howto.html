<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from xdocs/howto\action-event-howto.xml at 18 June 2019 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Apache Turbine &#x2013; Action Events Howto</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    
  </head>
  <body class="composite">
    <div id="banner">
<a href="../../../" id="bannerLeft" title="Apache Turbine"><img src="../images/turbine-project-apache-separate.png"  alt="Apache Turbine"/></a>
<div id="bannerRight">
<img src="../images/logo.gif"  alt=""/></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 18 June 2019</span>
          &nbsp;| <span id="projectVersion">Version: 5.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a> |
<a href="../../../" title="Turbine">Turbine</a> |
<a href="../../../fulcrum/" title="Fulcrum">Fulcrum</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>General Information</h5>
    <ul>
     <li class="none"><a href="../index.html" title="Overview">Overview</a></li>
     <li class="none"><a href="../features.html" title="Features">Features</a></li>
     <li class="none"><a href="../fsd.html" title="Specification">Specification</a></li>
     <li class="none"><a href="../getting-started.html" title="Getting Started">Getting Started</a></li>
     <li class="none"><a href="../how-to-build.html" title="Howto Build Turbine">Howto Build Turbine</a></li>
     <li class="none"><a href="../changes-report.html" title="Changes">Changes</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../services/index.html" title="Services">Services</a></li>
     <li class="expanded"><a href="../howto/index.html" title="Howtos">Howtos</a>
      <ul>
       <li class="none"><strong>Action Events Howto</strong></li>
       <li class="none"><a href="../howto/annotations.html" title="Annotations Howto">Annotations Howto</a></li>
       <li class="none"><a href="../howto/configuration-howto.html" title="Configuration Howto">Configuration Howto</a></li>
       <li class="none"><a href="../howto/extend-user-howto.html" title="Extend User Howto">Extend User Howto</a></li>
       <li class="none"><a href="../howto/hibernate-howto.html" title="Hibernate OM Howto">Hibernate OM Howto</a></li>
       <li class="none"><a href="../howto/intake-howto.html" title="Intake Howto">Intake Howto</a></li>
       <li class="none"><a href="../howto/jsp-howto.html" title="JSP Howto">JSP Howto</a></li>
       <li class="none"><a href="../howto/migrate-from-2_1-howto.html" title="Migrating from 2.1 to 2.2">Migrating from 2.1 to 2.2</a></li>
       <li class="none"><a href="../howto/migrate-from-2_2-howto.html" title="Migrating from 2.2 to 2.3">Migrating from 2.2 to 2.3</a></li>
       <li class="none"><a href="../howto/migrate-from-2_3-howto.html" title="Migrating from 2.3 to 4.0">Migrating from 2.3 to 4.0</a></li>
       <li class="none"><a href="../howto/migrate-from-4_0-howto.html" title="Migrating from 4.0 to 5.0">Migrating from 4.0 to 5.0</a></li>
       <li class="none"><a href="../howto/pullmodel-howto.html" title="Pull Model Howto">Pull Model Howto</a></li>
       <li class="none"><a href="../howto/python-howto.html" title="Python Howto">Python Howto</a></li>
       <li class="none"><a href="../howto/security-howto.html" title="Security Howto">Security Howto</a></li>
       <li class="none"><a href="../howto/services-howto.html" title="Services Howto">Services Howto</a></li>
       <li class="none"><a href="../howto/url-rewriting-howto.html" title="URL rewriting Howto">URL rewriting Howto</a></li>
       <li class="none"><a href="../howto/context-howto.html" title="Velocity Context Howto">Velocity Context Howto</a></li>
       <li class="none"><a href="../howto/velocity-site-howto.html" title="Velocity Site Howto">Velocity Site Howto</a></li>
       <li class="none"><a href="../howto/velocityonlylayout-howto.html" title="VelocityOnlyLayout Howto">VelocityOnlyLayout Howto</a></li>
      </ul></li>
     <li class="none"><a href="http://wiki.apache.org/turbine/FrontPage" class="externalLink" title="Wiki">Wiki</a></li>
     <li class="none"><a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a></li>
    </ul>
       <h5>Development</h5>
    <ul>
     <li class="none"><a href="../proposals.html" title="Proposals">Proposals</a></li>
     <li class="none"><a href="../how-to-help.html" title="How To Help">How To Help</a></li>
     <li class="none"><a href="../todo.html" title="Todo">Todo</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
       <h5>Apache</h5>
    <ul>
     <li class="none"><a href="http://www.apache.org/" class="externalLink" title="Apache Website">Apache Website</a></li>
     <li class="none"><a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a></li>
     <li class="none"><a href="http://www.apache.org/security/" class="externalLink" title="Security">Security</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">


 

<div class="section">
<h2><a name="Action_Events"></a>Action Events</h2>


<p>
Turbine has a very useful feature that makes handling form submission
much more painless for the developer. In order to understand this, you
need to be familiar with the way that Turbine handles Actions. What happens
is that when a URI has the action= variable defined, a class is executed
before all of your other Screen classes by your Page class. So, consider
the following URI (I'm using the
<a href="velocity-site-howto.html">VelocitySite Howto</a> example):
</p>


<p>
<tt>http://www.server.com/servlet/Turbine/template/AddUser/action/NewUser</tt>
What happens is that Turbine will first execute the Java class file Action
named NewUser. Then, any class that extends the ActionEvent class instead
of the Action class will be able to take advantage of what happens next...
</p>


<div class="source">
<pre>
public class NewUser extends VelocityAction
{
    public void doAdd (PipelineData data, Context context) throws Exception
    {
        // put code here to add the user to the system
        context.put (&quot;username&quot;, username );
        getRunData(data).setMessage(&quot;User Added!&quot;);
    }

    @TurbineActionEvent(&quot;save&quot;)
    public void saveUser (PipelineData data, Context context) throws Exception
    {
        // put code here to save the modified user to persistent storage
        getRunData(data).setMessage(&quot;User Saved!&quot;);
    }

    public void doPerform(PipelineData data, Context context) throws Exception
    {
        getRunData(data).setMessage(&quot;Button not found!&quot;);
    }
}
</pre></div>


<p>
Then, write your HTML tags specially like this:
</p>


<div class="source">
<pre>
&lt;input type=&quot;submit&quot; name=&quot;eventSubmit_doAdd&quot; value=&quot;Add User&quot;&gt;
&lt;input type=&quot;submit&quot; name=&quot;eventSubmit_save&quot; value=&quot;Save User&quot;&gt;
</pre></div>


<p>
When your Action is executed, an &quot;event&quot; is sent to it by attempting
to execute a &quot;doAdd()&quot; method in your Action or a method annotated with the
event name &quot;save&quot;, respectively. The cool thing about this
is that each of your &quot;actions&quot; that are performed within your Action class
now are componentized into a single method that can be javadoc'ed individually.
The annotation adds the possibility to name your events and methods any way you
like.
</p>


<p>
This new functionality does not mean that you should write all of your
actions in one single class, what it means is that if you have a screen
with many buttons on it that are very specific to that screen, it might
be a good idea to place all those methods into a single class. This allows
you to do it easily and also prevents you from having to do a &quot;if then
elseif&quot; tree to figure out which button was clicked.
</p>


<p>
For a catchall, the doPerform() method will be executed if no other
method or button could be found.
</p>


<p>
Because all keys processed by ParameterParser are subject to URL
case folding, (in default mode lowercase), we have
to do some work to format the string into a method name. For example, a
button name eventSubmit_doDelete gets converted into eventsubmit_dodelete.
Thus, we need to form some sort of naming convention so that dodelete can
be turned into doDelete.
</p>


<p>
Thus, the convention is this:
</p>
<ul>
    
<li>The variable name MUST have the prefix &quot;eventSubmit_&quot;.</li>
    
<li>The variable name after the prefix MUST begin with the letters &quot;do&quot;.</li>
    
<li>The first letter after the &quot;do&quot; will be capitalized and the rest will be
        lowercase</li>
</ul>



<p>
If you follow these conventions, then you should be ok with your method
naming in your Action class. If you make use of the <tt>@TurbineActionEvent</tt>
annotation, you can get rid of the latter two limitations and name your events
methods as you like. Note that the event names are still subject to URL
case folding, so that by default, <tt>@TurbineActionEvent(&quot;save&quot;)</tt>
and <tt>@TurbineActionEvent(&quot;Save&quot;)</tt> are identical - unless you
run the ParameterParser with URL case folding set to NONE.
</p>


<p>
There is a property in the TurbineResources.properties file, called &quot;action.eventsubmit.needsvalue&quot;.
If you set this to &quot;true&quot;, only the events that contain a non-empty, non-zero value will be
executed. This is useful if you have a form with multiple, different events, that need to be executed
and the form is submitted by client-side code, e.g. JavaScript.
</p>

<p>
If you want to trigger an action event from an html link, versus a button, then just add a parameter with the name eventSubmit_doMyaction.
The value can be anything as the name is all that is important.
</p>
</div>



      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2000&#x2013;2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>