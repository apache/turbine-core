<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Turbine - Configuration Howto</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Eric Pugh"></meta><meta name="email" content="epugh@upstate.com"></meta></head><body class="composite"><div id="banner"><a href="http://turbine.apache.org/" id="organizationLogo"><img alt="Apache Software Foundation" src="../images/turbine-project.png"></img></a><a href="http://turbine.apache.org/turbine/turbine-2.3.3/index.html" id="projectLogo"><img alt="turbine-2" src="../images/logo.gif"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 21 November 2008
                <span class="separator">|</span> Doc for  2.3.3
                </div><div class="xright">
        
        <a href="http://turbine.apache.org/">Turbine Home</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/fulcrum/">Fulcrum</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/meta/">META</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menuGeneral_Information"><h5>General Information</h5><ul><li class="none"><a href="../index.html">Overview</a></li><li class="none"><a href="../features.html">Features</a></li><li class="none"><a href="../fsd.html">Specification</a></li><li class="none"><a href="../getting-started.html">Getting Started</a></li></ul></div><div id="menuDocumentation"><h5>Documentation</h5><ul><li class="none"><a href="../changes-report.html">Changes</a></li><li class="none"><a href="../turbine-schema.html">Core DB Schema</a></li><li class="collapsed"><a href="../services/index.html">Services</a></li><li class="expanded"><a href="../howto/index.html">Howtos</a><ul><li class="none"><a href="../howto/action-event-howto.html">Action Events Howto</a></li><li class="none"><strong><a href="../howto/configuration-howto.html">Configuration Howto</a></strong></li><li class="none"><a href="../howto/extend-user-howto.html">Extend User Howto</a></li><li class="none"><a href="../howto/hibernate-howto.html">Hibernate OM Howto</a></li><li class="none"><a href="../howto/intake-howto.html">Intake Howto</a></li><li class="none"><a href="../howto/jboss-howto.html">JBoss Howto</a></li><li class="none"><a href="../howto/jsp-howto.html">JSP Howto</a></li><li class="none"><a href="../howto/migrate-from-2_1-howto.html">Migrating 2.1 to 2.2</a></li><li class="none"><a href="../howto/migrate-from-2_2-howto.html">Migrating 2.2 to 2.3</a></li><li class="none"><a href="../howto/pullmodel-howto.html">Pull Model Howto</a></li><li class="none"><a href="../howto/python-howto.html">Python Howto</a></li><li class="none"><a href="../howto/security-howto.html">Security Howto</a></li><li class="none"><a href="../howto/services-howto.html">Services Howto</a></li><li class="none"><a href="../howto/sql-howto.html">How to build the SQL files</a></li><li class="none"><a href="../howto/url-rewriting-howto.html">URL rewriting Howto</a></li><li class="none"><a href="../howto/context-howto.html">Velocity Context Howto</a></li><li class="none"><a href="../howto/velocity-site-howto.html">Velocity Site Howto</a></li><li class="none"><a href="../howto/velocityonlylayout-howto.html">VelocityOnlyLayout Howto</a></li><li class="none"><a href="http://wiki.apache.org/turbine/Turbine2" class="externalLink" title="External Link">Wiki Howtos</a></li></ul></li><li class="none"><a href="../apidocs/index.html">JavaDocs</a></li></ul></div><div id="menuDevelopment"><h5>Development</h5><ul><li class="none"><a href="../proposals.html">Proposals</a></li><li class="none"><a href="../how-to-help.html">How To Help</a></li><li class="none"><a href="../todo.html">Todo</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="../development-process.html">Development Process</a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/mavenlogo_builtby_w.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Configurating_Turbine"></a><h2>Configurating Turbine</h2>
<p>
With Turbine 2.3, there are now two different ways to configure Turbine.  The old
classic way was to provide a TurbineResources.properties file in the standard
properties format.  However, added to 2.3 is the ability to specify an XML based
TurbineConfiguration.xml file that instructs Turbine how to load properties from
multiple sources.
</p>
</div><div class="section"><a name="Why_do_I_want_multiple_sources_of_configuration_"></a><h2>Why do I want multiple sources of configuration?</h2>
<p>
In the classic development environment, the developer has one environment, there is
a QA environment, and then production.  While all of these environments strive to be
as similar as possible, there are often difference between them.  For instance, in
the development environment, you might want to not have Turbine cache templates, that
way, as you change them, they are just reloaded.  But in test and production you might
need them to be non reloading for performance.  There are many other situations like this.
</p>
<p>
This leads to complex build scripts where you try and customize properties based on what
environment you are performing a build for.  The more complex the build is, the less frequently
the development team performs them, which goes against Agile development principles.  The
ability of Turbine to merge multiple configuration properties together allows developers to
easily customize Turbine without resorting to complex build scripts.  A simple war:webapp is
all you need for any environment!  Replacing something like build:dev, build:test, and build:live.
</p>
</div><div class="section"><a name="Classic_Configuration_Using_Single_Property_File"></a><h2>Classic Configuration Using Single Property File</h2>
<p>
The classic way of performing configuration is to provide the properties file via your
web.xml file:
</p>


    <div class="source"><pre>
    &lt;servlet&gt;
        &lt;servlet-name&gt;fortius&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.turbine.Turbine&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;properties&lt;/param-name&gt;
                    &lt;param-value&gt;
                            /WEB-INF/conf/TurbineResources.properties
            &lt;/param-value&gt;
        &lt;/init-param&gt;

        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
</pre></div>
  

<p>
This works well, but if you want to customize the various settings that Turbine uses to
control it's behavior, then you need to provide a TurbineConfiguration.xml file!
</p>
</div><div class="section"><a name="TurbineConfiguration_xml_File_for_Multiple_Sources"></a><h2>TurbineConfiguration.xml File for Multiple Sources</h2>
<p>
The TurbineConfiguration.xml file doesn't contain any configuration data itself, instead
it points at other files that may have configuration data.  Turbine leverages Commons-Configuration's
ConfigurationFactory to access the data.  For more information, look at
<a href="http://commons.apache.org/configuration/" class="externalLink" title="External Link">Configuration</a> homepage.
</p>

<p>
To specify the location of your TurbineConfiguration.xml file, just change your servlet init
parameters to this:
</p>

    <div class="source"><pre>
    &lt;servlet&gt;
        &lt;servlet-name&gt;fortius&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.turbine.Turbine&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;configuration&lt;/param-name&gt;
            &lt;param-value&gt;
                    /WEB-INF/conf/TurbineConfiguration.xml
            &lt;/param-value&gt;
        &lt;/init-param&gt;

        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

</pre></div>
  

<p>
This file will contain lines like this:
</p>


    <div class="source"><pre>
&lt;configuration&gt;
  &lt;jndi className="org.apache.commons.configuration.JNDIConfiguration" prefix="java:comp/env"/&gt;
  &lt;dom4j className="org.apache.commons.configuration.DOM4JConfiguration" fileName="/WEB-INF/conf/OtherProperties.xml"/&gt;
  &lt;properties className="org.apache.commons.configuration.PropertiesConfiguration" fileName="/WEB-INF/conf/TurbineResources.properties"/&gt;
&lt;/configuration&gt;
</pre></div>
  

<p>
The configurations specified first override the values of configurations specified
afterwards.  So, if the configuration value "mail.server" is specified as mymailserver.mycompany.com in
your JNDI settings, and localhost in the TurbineResources.properties, then when you issue:
</p>

    <div class="source"><pre>
	String mailServer = Turbine.getConfiguration().get("mail.server");
</pre></div>
  
<p>
Then the mailServer value returned will be "mymailserver.mycompany.com".  However, if you
don't have a setting specifed in your JNDI settings, then this would return "localhost".
</p>

</div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2000-2008, Apache Software Foundation</div><div class="clear"><hr></hr></div></div></body></html>