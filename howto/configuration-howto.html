<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from xdocs/howto\configuration-howto.xml at 22 September 2021
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>Apache Turbine &#x2013; Configuration Howto</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.9.min.js"></script>
<link rel="icon" type="image/png" sizes="48x48" href="./images/favicon.ico"> 
      <link rel="icon" type="image/png" sizes="48x48" href="../images/favicon.ico"> 
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../../" id="bannerLeft" title="Apache Turbine"><img src="../images/turbine-project-apache-separate.png"  alt="Apache Turbine"/></a></div>
          <div class="pull-right"><div id="bannerRight"><img src="../images/logo.gif"  alt=""/></div>
</div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 22 September 2021<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 5.1-SNAPSHOT</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://turbine.apache.org/fulcrum/" class="externalLink" title="Fulcrum">Fulcrum</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://turbine.apache.org/" class="externalLink" title="Turbine">Turbine</a></li>
      <li class="pull-right"><a href="https://www.apache.org" class="externalLink" title="Apache">Apache</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">General Information</li>
    <li><a href="../index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="../features.html" title="Features"><span class="none"></span>Features</a></li>
    <li><a href="../fsd.html" title="Specification"><span class="none"></span>Specification</a></li>
    <li><a href="../getting-started.html" title="Getting Started"><span class="none"></span>Getting Started</a></li>
    <li><a href="../how-to-build.html" title="Howto Build Turbine"><span class="none"></span>Howto Build Turbine</a></li>
    <li><a href="../changes-report.html" title="Changes"><span class="none"></span>Changes</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../services/index.html" title="Services"><span class="icon-chevron-right"></span>Services</a></li>
    <li><a href="../howto/index.html" title="Howtos"><span class="icon-chevron-down"></span>Howtos</a>
     <ul class="nav nav-list">
      <li><a href="../howto/action-event-howto.html" title="Action Events Howto"><span class="none"></span>Action Events Howto</a></li>
      <li><a href="../howto/annotations.html" title="Annotations Howto"><span class="none"></span>Annotations Howto</a></li>
      <li class="active"><a href="#"><span class="none"></span>Configuration Howto</a></li>
      <li><a href="../howto/extend-user-howto.html" title="Extend User Howto"><span class="none"></span>Extend User Howto</a></li>
      <li><a href="../howto/hibernate-howto.html" title="Hibernate OM Howto"><span class="none"></span>Hibernate OM Howto</a></li>
      <li><a href="../howto/intake-howto.html" title="Intake Howto"><span class="none"></span>Intake Howto</a></li>
      <li><a href="../howto/jsp-howto.html" title="JSP Howto"><span class="none"></span>JSP Howto</a></li>
      <li><a href="../howto/migrate-from-2_1-howto.html" title="Migrating from 2.1 to 2.2"><span class="none"></span>Migrating from 2.1 to 2.2</a></li>
      <li><a href="../howto/migrate-from-2_2-howto.html" title="Migrating from 2.2 to 2.3"><span class="none"></span>Migrating from 2.2 to 2.3</a></li>
      <li><a href="../howto/migrate-from-2_3-howto.html" title="Migrating from 2.3 to 4.0"><span class="none"></span>Migrating from 2.3 to 4.0</a></li>
      <li><a href="../howto/migrate-from-4_0-howto.html" title="Migrating from 4.0 to 5.0"><span class="none"></span>Migrating from 4.0 to 5.0</a></li>
      <li><a href="../howto/pullmodel-howto.html" title="Pull Model Howto"><span class="none"></span>Pull Model Howto</a></li>
      <li><a href="../howto/python-howto.html" title="Python Howto"><span class="none"></span>Python Howto</a></li>
      <li><a href="../howto/security-howto.html" title="Security Howto"><span class="none"></span>Security Howto</a></li>
      <li><a href="../howto/services-howto.html" title="Services Howto"><span class="none"></span>Services Howto</a></li>
      <li><a href="../howto/url-mapper-howto.html" title="URL Simplifier Howto"><span class="none"></span>URL Simplifier Howto</a></li>
      <li><a href="../howto/url-rewriting-howto.html" title="URL Rewriting Howto"><span class="none"></span>URL Rewriting Howto</a></li>
      <li><a href="../howto/context-howto.html" title="Velocity Context Howto"><span class="none"></span>Velocity Context Howto</a></li>
      <li><a href="../howto/velocity-site-howto.html" title="Velocity Site Howto"><span class="none"></span>Velocity Site Howto</a></li>
      <li><a href="../howto/velocityonlylayout-howto.html" title="VelocityOnlyLayout Howto"><span class="none"></span>VelocityOnlyLayout Howto</a></li>
     </ul></li>
    <li><a href="https://cwiki.apache.org/confluence/display/TURBINE" class="externalLink" title="Wiki"><span class="none"></span>Wiki</a></li>
    <li><a href="../apidocs/index.html" title="JavaDocs"><span class="none"></span>JavaDocs</a></li>
   <li class="nav-header">Development</li>
    <li><a href="../proposals.html" title="Proposals"><span class="none"></span>Proposals</a></li>
    <li><a href="../how-to-help.html" title="How To Help"><span class="none"></span>How To Help</a></li>
    <li><a href="../todo.html" title="Todo"><span class="none"></span>Todo</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
   <li class="nav-header">Apache</li>
    <li><a href="https://www.apache.org/" class="externalLink" title="Apache Website"><span class="none"></span>Apache Website</a></li>
    <li><a href="https://www.apache.org/licenses/" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works"><span class="none"></span>How the ASF works</a></li>
    <li><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship"><span class="none"></span>Sponsorship</a></li>
    <li><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks"><span class="none"></span>Thanks</a></li>
    <li><a href="https://www.apache.org/security/" class="externalLink" title="Security"><span class="none"></span>Security</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >




<section>
<h2><a name="Configurating_Turbine"></a>Configurating Turbine</h2>

<p>
With Turbine 2.3, there are now two different ways to configure Turbine.  The old
classic way was to provide a TurbineResources.properties file in the standard
properties format.  However, added to 2.3 is the ability to specify an XML based
TurbineConfiguration.xml file that instructs Turbine how to load properties from
multiple sources.
</p>
</section>

<section>
<h2><a name="Why_do_I_want_multiple_sources_of_configuration.3F"></a>Why do I want multiple sources of configuration?</h2>

<p>
In the classic development environment, the developer has one environment, there is
a QA environment, and then production.  While all of these environments strive to be
as similar as possible, there are often difference between them.  For instance, in
the development environment, you might want to not have Turbine cache templates, that
way, as you change them, they are just reloaded.  But in test and production you might
need them to be non reloading for performance.  There are many other situations like this.
</p>

<p>
This leads to complex build scripts where you try and customize properties based on what
environment you are performing a build for.  The more complex the build is, the less frequently
the development team performs them, which goes against Agile development principles.  The
ability of Turbine to merge multiple configuration properties together allows developers to
easily customize Turbine without resorting to complex build scripts.  A simple war:webapp is
all you need for any environment!  Replacing something like build:dev, build:test, and build:live.
</p>
</section>

<section>
<h2><a name="Classic_Configuration_Using_Single_Property_File"></a>Classic Configuration Using Single Property File</h2>

<p>
The classic way of performing configuration is to provide the properties file via your
web.xml file:
</p>


<div class="source"><pre class="prettyprint">
    &lt;servlet&gt;
        &lt;servlet-name&gt;fortius&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.turbine.Turbine&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;properties&lt;/param-name&gt;
                    &lt;param-value&gt;
                            /WEB-INF/conf/TurbineResources.properties
            &lt;/param-value&gt;
        &lt;/init-param&gt;

        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
</pre></div>


<p>
This works well, but if you want to customize the various settings that Turbine uses to
control it's behavior, then you need to provide a TurbineConfiguration.xml file!
Reading from /WEB-INF/conf/TurbineResources.properties is actually the default fall back - if no init parameter is provided.
</p>
</section>

<section>
<h2><a name="TurbineConfiguration.xml_File_for_Multiple_Sources"></a>TurbineConfiguration.xml File for Multiple Sources</h2>

<p>
The TurbineConfiguration.xml file doesn't contain any configuration data itself, instead
it points at other files that may have configuration data.  Turbine leverages Commons-Configuration's
<code>DefaultConfigurationBuilder</code> to access the data.  For more information, look at
the <a class="externalLink" href="http://commons.apache.org/proper/commons-configuration/">Configuration</a>
homepage.
</p>


<p>
To specify the location of your TurbineConfiguration.xml file, just change your servlet init
parameters to this:
</p>

<div class="source"><pre class="prettyprint">
    &lt;servlet&gt;
        &lt;servlet-name&gt;fortius&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.turbine.Turbine&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;configuration&lt;/param-name&gt;
            &lt;param-value&gt;
                    /WEB-INF/conf/TurbineConfiguration.xml
            &lt;/param-value&gt;
        &lt;/init-param&gt;

        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

</pre></div>


<p>
This file will contain lines like this:
</p>


<div class="source"><pre class="prettyprint">
&lt;configuration&gt;
  &lt;jndi className=&quot;org.apache.commons.configuration.JNDIConfiguration&quot; prefix=&quot;java:comp/env&quot;/&gt;
  &lt;!-- CHANGE! As fileName is converted to URL internally now and applicationpath is prefixed fileName has to be a relative path, cft. RFC2396.  --&gt;
  &lt;dom4j className=&quot;org.apache.commons.configuration.DOM4JConfiguration&quot; fileName=&quot;WEB-INF/conf/OtherProperties.xml&quot;/&gt;
  &lt;properties className=&quot;org.apache.commons.configuration.PropertiesConfiguration&quot; fileName=&quot;WEB-INF/conf/TurbineResources.properties&quot;/&gt;
&lt;/configuration&gt;
</pre></div>


<p>
The configurations specified first override the values of configurations specified
afterwards.  So, if the configuration value &quot;mail.server&quot; is specified as mymailserver.mycompany.com in
your JNDI settings, and localhost in the TurbineResources.properties, then when you issue:
</p>

<div class="source"><pre class="prettyprint">
	String mailServer = Turbine.getConfiguration().get(&quot;mail.server&quot;);
</pre></div>

<p>
Then the mailServer value returned will be &quot;mymailserver.mycompany.com&quot;.  However, if you
don't have a setting specified in your JNDI settings, then this would return &quot;localhost&quot;.
</p>

</section>



        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2000&#x2013;2021
<a href="https://www.apache.org/">The Apache Software Foundation</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
