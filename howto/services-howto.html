<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 21 December 2015 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Apache Turbine - 
  Services Howto</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20151221" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="../../../" id="bannerLeft" title="Apache Turbine">
                                                <img src="../images/turbine-project.png" alt="Apache Turbine" />
                </a>
                          <div id="bannerRight">
                                                <img src="../images/logo.gif" alt="Apache Turbine" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 21 December 2015</span>
                  &nbsp;| <span id="projectVersion">Version: 4.0-M2</span>
                      </div>
            <div class="xright">                    <a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a>
            |
                        <a href="../../../" title="Turbine">Turbine</a>
            |
                        <a href="../../../fulcrum/" title="Fulcrum">Fulcrum</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>General Information</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="../fsd.html" title="Specification">Specification</a>
            </li>
                  <li class="none">
                          <a href="../getting-started.html" title="Getting Started">Getting Started</a>
            </li>
                  <li class="none">
                          <a href="../how-to-build.html" title="Howto Build Turbine">Howto Build Turbine</a>
            </li>
                  <li class="none">
                          <a href="../changes-report.html" title="Changes">Changes</a>
            </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="../services/index.html" title="Services">Services</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                <li class="expanded">
                          <a href="../howto/index.html" title="Howtos">Howtos</a>
                    <ul>
                      <li class="none">
                          <a href="../howto/action-event-howto.html" title="Action Events Howto">Action Events Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/annotations.html" title="Annotations Howto">Annotations Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/configuration-howto.html" title="Configuration Howto">Configuration Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/extend-user-howto.html" title="Extend User Howto">Extend User Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/hibernate-howto.html" title="Hibernate OM Howto">Hibernate OM Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/intake-howto.html" title="Intake Howto">Intake Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/jsp-howto.html" title="JSP Howto">JSP Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/migrate-from-2_1-howto.html" title="Migrating from 2.1 to 2.2">Migrating from 2.1 to 2.2</a>
            </li>
                      <li class="none">
                          <a href="../howto/migrate-from-2_2-howto.html" title="Migrating from 2.2 to 2.3">Migrating from 2.2 to 2.3</a>
            </li>
                      <li class="none">
                          <a href="../howto/migrate-from-2_3-howto.html" title="Migrating from 2.3 to 4.0">Migrating from 2.3 to 4.0</a>
            </li>
                      <li class="none">
                          <a href="../howto/pullmodel-howto.html" title="Pull Model Howto">Pull Model Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/python-howto.html" title="Python Howto">Python Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/security-howto.html" title="Security Howto">Security Howto</a>
            </li>
                      <li class="none">
            <strong>Services Howto</strong>
          </li>
                      <li class="none">
                          <a href="../howto/url-rewriting-howto.html" title="URL rewriting Howto">URL rewriting Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/context-howto.html" title="Velocity Context Howto">Velocity Context Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/velocity-site-howto.html" title="Velocity Site Howto">Velocity Site Howto</a>
            </li>
                      <li class="none">
                          <a href="../howto/velocityonlylayout-howto.html" title="VelocityOnlyLayout Howto">VelocityOnlyLayout Howto</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="http://wiki.apache.org/turbine/FrontPage" class="externalLink" title="Wiki">Wiki</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
          </ul>
                       <h5>Development</h5>
                  <ul>
                  <li class="none">
                          <a href="../proposals.html" title="Proposals">Proposals</a>
            </li>
                  <li class="none">
                          <a href="../how-to-help.html" title="How To Help">How To Help</a>
            </li>
                  <li class="none">
                          <a href="../todo.html" title="Todo">Todo</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Apache</h5>
                  <ul>
                  <li class="none">
                          <a href="http://www.apache.org/" class="externalLink" title="Apache Website">Apache Website</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a>
            </li>
                  <li class="none">
                          <a href="http://www.apache.org/security/" class="externalLink" title="Security">Security</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License. -->

 
  <div class="section">
<h2>Turbine Services Creation<a name="Turbine_Services_Creation"></a></h2>
    
<p>
      Adding your own services to Turbine is an easy task. Simply make your
      class extend <b>org.apache.turbine.services.TurbineBaseService</b>.
      This is necessary so that the Turbine Service Broker can start up
      your service.
    </p>

    
<p>
      To make it known to the Turbine itself, you must configure it in
      the TurbineResources.properties like this:

</p>
<div class="source">
<pre>
services.MyServiceName.classname = full.class.name.of.your.service
</pre></div>
    

    
<p>
      and you're set, Turbine will now initialize the service if it is
      requested by an application. Please be aware that your service is
      <b>not</b> initialized right at Startup. This is called lazy init.
      If you need your Service to start up right away, you must add another
      property to the TurbineResources.properties:

</p>
<div class="source">
<pre>
services.MyServiceName.earlyInit = true
</pre></div>
    

    
<p>
      If you look at the examples of the simple services like
      servlet/TurbineServletService you'll get on speed pretty fast.
    </p>
</div>


<div class="section">
<h2>In a Nutshell<a name="In_a_Nutshell"></a></h2>
    
<p>
      </p>
<ul>
        
<li>
          You must not try to provide a constructor with parameters, best is
          not to provide any constructor at all, because nothing should be
          done at construction time (You'll get the default constructor which
          is fine for us).
         </li>
         
<li>
           Your Service will be instantiated exactly once. So it must be
           threadsafe and must not use class global variables for
           session-dependent information.
         </li>
         
<li>
           You should provide an init() method which is called when your
           service is requested for the first time (or at startup if you
           set earlyInit = true) and should initialize your service
           dependent code. There is lots of confusion of how this init()
           method should look like because Turbine used different methods
           of Service initialization. Beginning with Turbine 2.2, you should
           only use the parameterless variant:
         </li>
      </ul>
    

<div class="source">
<pre>
public void init() throws InitializationException
{
}
</pre></div>
    
<p>
      </p>
<ul>
        
<li>
          You <b>must</b> call setInit(true) if your service initializes
          correctly. Otherwise no user of your service can request it.
          Right after this, your service might be queried and used by other
          sessions, so you should not call setInit() prematurely.
        </li>
        
<li>
          You might provide a shutdown() method which is called when
          Turbine shuts down. You can clean up your internal data in this
          method. You should call setInit(false) as the last thing in
          shutdown().
        </li>
      </ul>
    
</div>


<div class="section">
<h2>Style<a name="Style"></a></h2>
    
<p>
      It is good style, that if you build the FooService, to provide
      <b>your.package.FooService.java</b> with an Interface definition of
      your service which extends <b>org.apache.turbine.services.Service</b>
      It should contain a constant SERVICE_NAME with the Turbine visible
      name of your service like this:
</p>
<div class="source">
<pre>
package your.package;

import org.apache.turbine.services.Service;

public interface FooService extends Service
{
    /**
     * The service identifier
     */
    public String SERVICE_NAME = &quot;FooService&quot;;

    [...]

}
</pre></div>
    

    
<p>
      <b>your.package.TurbineFooService.java</b> which extends the
      <b>org.apache.turbine.services.TurbineBaseService</b> class and
      implements <b>your.package.FooService</b> and provides the actual code:
    </p>


<div class="source">
<pre>
package your.package;

import org.apache.turbine.services.TurbineBaseService;

public class TurbineFooService
    extends TurbineBaseService
    implements FooService
{
    /**
     * Service logic here
     */
    [...]

}
</pre></div>

    
<p>
      <b>your.package.TurbineFoo.java</b> which contains static facade
      methods for your service along the following lines:

</p>
<div class="source">
<pre>
import org.apache.turbine.services.TurbineServices;

public class TurbineFoo
{
    protected static FooService getService()
    {
        return (FooService) TurbineServices
            .getInstance().getService(FooService.SERVICE_NAME);
    }

    [...]

    public static void fooMethod1()
    {
        getService().fooMethod1();
    }

    public static int fooMethod2(int bar)
    {
        return getService().fooMethod2(bar);
    }

    [...]

}
</pre></div>
    

    
<p>
      to give users of your service the ability to simply write:

</p>
<div class="source">
<pre>
TurbineFoo.fooMethod1();
</pre></div>
    

    
<p>
      in their code and not to care about which actual Implementation of
      FooService is running.
    </p>

    
<p>
      init() and shutdown() applies to Turbine 2.1/2.2 This might change
      with the lifecycle interfaces in a later release.
    </p>
</div>

 

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2000-2015
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>