<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from xdocs/howto\migrate-from-2_3-howto.xml at 18 June 2019 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Apache Turbine &#x2013; Migrating from 2.3 to 4.0</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    
  </head>
  <body class="composite">
    <div id="banner">
<a href="../../../" id="bannerLeft" title="Apache Turbine"><img src="../images/turbine-project-apache-separate.png"  alt="Apache Turbine"/></a>
<div id="bannerRight">
<img src="../images/logo.gif"  alt=""/></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 18 June 2019</span>
          &nbsp;| <span id="projectVersion">Version: 5.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a> |
<a href="../../../" title="Turbine">Turbine</a> |
<a href="../../../fulcrum/" title="Fulcrum">Fulcrum</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>General Information</h5>
    <ul>
     <li class="none"><a href="../index.html" title="Overview">Overview</a></li>
     <li class="none"><a href="../features.html" title="Features">Features</a></li>
     <li class="none"><a href="../fsd.html" title="Specification">Specification</a></li>
     <li class="none"><a href="../getting-started.html" title="Getting Started">Getting Started</a></li>
     <li class="none"><a href="../how-to-build.html" title="Howto Build Turbine">Howto Build Turbine</a></li>
     <li class="none"><a href="../changes-report.html" title="Changes">Changes</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../services/index.html" title="Services">Services</a></li>
     <li class="expanded"><a href="../howto/index.html" title="Howtos">Howtos</a>
      <ul>
       <li class="none"><a href="../howto/action-event-howto.html" title="Action Events Howto">Action Events Howto</a></li>
       <li class="none"><a href="../howto/annotations.html" title="Annotations Howto">Annotations Howto</a></li>
       <li class="none"><a href="../howto/configuration-howto.html" title="Configuration Howto">Configuration Howto</a></li>
       <li class="none"><a href="../howto/extend-user-howto.html" title="Extend User Howto">Extend User Howto</a></li>
       <li class="none"><a href="../howto/hibernate-howto.html" title="Hibernate OM Howto">Hibernate OM Howto</a></li>
       <li class="none"><a href="../howto/intake-howto.html" title="Intake Howto">Intake Howto</a></li>
       <li class="none"><a href="../howto/jsp-howto.html" title="JSP Howto">JSP Howto</a></li>
       <li class="none"><a href="../howto/migrate-from-2_1-howto.html" title="Migrating from 2.1 to 2.2">Migrating from 2.1 to 2.2</a></li>
       <li class="none"><a href="../howto/migrate-from-2_2-howto.html" title="Migrating from 2.2 to 2.3">Migrating from 2.2 to 2.3</a></li>
       <li class="none"><strong>Migrating from 2.3 to 4.0</strong></li>
       <li class="none"><a href="../howto/migrate-from-4_0-howto.html" title="Migrating from 4.0 to 5.0">Migrating from 4.0 to 5.0</a></li>
       <li class="none"><a href="../howto/pullmodel-howto.html" title="Pull Model Howto">Pull Model Howto</a></li>
       <li class="none"><a href="../howto/python-howto.html" title="Python Howto">Python Howto</a></li>
       <li class="none"><a href="../howto/security-howto.html" title="Security Howto">Security Howto</a></li>
       <li class="none"><a href="../howto/services-howto.html" title="Services Howto">Services Howto</a></li>
       <li class="none"><a href="../howto/url-rewriting-howto.html" title="URL rewriting Howto">URL rewriting Howto</a></li>
       <li class="none"><a href="../howto/context-howto.html" title="Velocity Context Howto">Velocity Context Howto</a></li>
       <li class="none"><a href="../howto/velocity-site-howto.html" title="Velocity Site Howto">Velocity Site Howto</a></li>
       <li class="none"><a href="../howto/velocityonlylayout-howto.html" title="VelocityOnlyLayout Howto">VelocityOnlyLayout Howto</a></li>
      </ul></li>
     <li class="none"><a href="http://wiki.apache.org/turbine/FrontPage" class="externalLink" title="Wiki">Wiki</a></li>
     <li class="none"><a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a></li>
    </ul>
       <h5>Development</h5>
    <ul>
     <li class="none"><a href="../proposals.html" title="Proposals">Proposals</a></li>
     <li class="none"><a href="../how-to-help.html" title="How To Help">How To Help</a></li>
     <li class="none"><a href="../todo.html" title="Todo">Todo</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
       <h5>Apache</h5>
    <ul>
     <li class="none"><a href="http://www.apache.org/" class="externalLink" title="Apache Website">Apache Website</a></li>
     <li class="none"><a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a></li>
     <li class="none"><a href="http://www.apache.org/security/" class="externalLink" title="Security">Security</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">


 

<div class="section">
<h2><a name="Introduction"></a>Introduction</h2>

<p>
    This document describes the basic steps needed to migrate an
    application written for Turbine 2.3 to Turbine 4.0.
</p>

<p>
	Migrating from Turbine 2.3 to Turbine 4.0 is mostly a task of
	moving from the old service format to the new one. One of the
	biggest purposes with Turbine 4 was to decouple the different services
	and move them to <a class="externalLink" href="http://turbine.apache.org/fulcrum/">Fulcrum</a>.
	Many of the released components of Fulcrum correspond to
	a previous Turbine service that is no longer bundled with the
	Turbine core.
</p>

<p>
	The services has been converted to Avalon components and do not
	implement the Service interface any more. Turbine still handles
	services that do implement the Service interface though so no
	rewrite is necessary if you have written services of your own.
	The new services can also be accessed in pretty much the same way
	as the old ones, as long as the AvalonComponentService is properly configured.
</p>
</div>


<div class="section">
<h2><a name="Accessing_the_new_services"></a>Accessing the new services</h2>

<p>
	What needs to be done to access the decoupled services can be
	summarised in 4 steps:
	</p>
<ul>
		
<li>Make sure the AvalonComponentService is properly configured</li>
		
<li>Add the services you need to your project dependency and to roleConfiguration.xml</li>
		
<li>Access the Fulcrum services with class name instead of service name</li>
		
<li>Remove any reference to the static facade classes and access the interfaces directly</li>
	</ul>


<div class="section">
<h3><a name="Make_sure_the_AvalonComponentService_is_properly_configured"></a>Make sure the AvalonComponentService is properly configured</h3>

<p>
	The AvalonComponentService allows you to retrieve the new services
	via the old TurbineServices interface. Make sure that the AvalonComponentService
	is added in your TurbineResources.properties and that you use TurbineYaafiComponentService as
	the implementing class.
</p>

<div class="source">
<pre>

services.AvalonComponentService.classname=org.apache.turbine.services.avaloncomponent.TurbineYaafiComponentService
services.AvalonComponentService.earlyInit=true

</pre></div>

<p>
	The service <i>must</i> be the first service in TurbineResources.properties and it <i>must</i> be initialized early.
	Also make sure that <a class="externalLink" href="http://turbine.apache.org/fulcrum/fulcrum-yaafi/">Fulcrum YAAFI</a>
	is added to your project dependency.
</p>
</div>

<div class="section">
<h3><a name="Add_the_services_you_need_to_your_project_dependency_and_to_roleConfiguration.xml"></a>Add the services you need to your project dependency and to roleConfiguration.xml</h3>

<p>
	Many services that were previously included in Turbine has been converted to Avalon
	components and moved to Fulcrum. You only need to add the ones used in your project as
	a dependency. Each service has its own documentation and it is described on their project
	page how you can configure them, but common for all is that they need to be added to your
	roleConfiguration.xml file. Adding a service to roleConfiguration.xml is equivalent to adding
	a Turbine service to TurbineResources.properties.
</p>
</div>

<div class="section">
<h3><a name="Access_the_Fulcrum_services_with_class_name_instead_of_service_name"></a>Access the Fulcrum services with class name instead of service name</h3>

<p>
	As you may have noticed in the documentation for the Fulcrum components, the name for
	the different services is the full class name. Therefore the input parameter in the
	getService method of TurbineServices needs to be the full class name of the service.
	Usually this is stored in a static field called ROLE. Ex:
</p>

<div class="source">
<pre>

ParseService parserService = (ParserService)TurbineServices.getInstance().getService(ParserService.ROLE);

</pre></div>
</div>

<div class="section">
<h3><a name="Remove_any_reference_to_the_static_facade_classes_and_access_the_interfaces_directly"></a>Remove any reference to the static facade classes and access the interfaces directly</h3>

<p>
	The new services do not have a static facade class like the old ones
	(org.apache.turbine.services.localization.Localization for LocalizationService,
	org.apache.turbine.services.cache.TurbineGlobalCache for GlobalCacheService etc).
	If you have used these facade classes, you now need to access the service directly via
	the interface instead. How to access the classes is described in the previous section.
</p>
</div>
</div>


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2000&#x2013;2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>