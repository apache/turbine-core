<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.8.1 from xdocs/howto\pullmodel-howto.xml at 18 June 2019 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Apache Turbine &#x2013; Pull Model Howto</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta http-equiv="Content-Language" content="en" />
    
  </head>
  <body class="composite">
    <div id="banner">
<a href="../../../" id="bannerLeft" title="Apache Turbine"><img src="../images/turbine-project-apache-separate.png"  alt="Apache Turbine"/></a>
<div id="bannerRight">
<img src="../images/logo.gif"  alt=""/></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 18 June 2019</span>
          &nbsp;| <span id="projectVersion">Version: 5.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a> |
<a href="../../../" title="Turbine">Turbine</a> |
<a href="../../../fulcrum/" title="Fulcrum">Fulcrum</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>General Information</h5>
    <ul>
     <li class="none"><a href="../index.html" title="Overview">Overview</a></li>
     <li class="none"><a href="../features.html" title="Features">Features</a></li>
     <li class="none"><a href="../fsd.html" title="Specification">Specification</a></li>
     <li class="none"><a href="../getting-started.html" title="Getting Started">Getting Started</a></li>
     <li class="none"><a href="../how-to-build.html" title="Howto Build Turbine">Howto Build Turbine</a></li>
     <li class="none"><a href="../changes-report.html" title="Changes">Changes</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../services/index.html" title="Services">Services</a></li>
     <li class="expanded"><a href="../howto/index.html" title="Howtos">Howtos</a>
      <ul>
       <li class="none"><a href="../howto/action-event-howto.html" title="Action Events Howto">Action Events Howto</a></li>
       <li class="none"><a href="../howto/annotations.html" title="Annotations Howto">Annotations Howto</a></li>
       <li class="none"><a href="../howto/configuration-howto.html" title="Configuration Howto">Configuration Howto</a></li>
       <li class="none"><a href="../howto/extend-user-howto.html" title="Extend User Howto">Extend User Howto</a></li>
       <li class="none"><a href="../howto/hibernate-howto.html" title="Hibernate OM Howto">Hibernate OM Howto</a></li>
       <li class="none"><a href="../howto/intake-howto.html" title="Intake Howto">Intake Howto</a></li>
       <li class="none"><a href="../howto/jsp-howto.html" title="JSP Howto">JSP Howto</a></li>
       <li class="none"><a href="../howto/migrate-from-2_1-howto.html" title="Migrating from 2.1 to 2.2">Migrating from 2.1 to 2.2</a></li>
       <li class="none"><a href="../howto/migrate-from-2_2-howto.html" title="Migrating from 2.2 to 2.3">Migrating from 2.2 to 2.3</a></li>
       <li class="none"><a href="../howto/migrate-from-2_3-howto.html" title="Migrating from 2.3 to 4.0">Migrating from 2.3 to 4.0</a></li>
       <li class="none"><a href="../howto/migrate-from-4_0-howto.html" title="Migrating from 4.0 to 5.0">Migrating from 4.0 to 5.0</a></li>
       <li class="none"><strong>Pull Model Howto</strong></li>
       <li class="none"><a href="../howto/python-howto.html" title="Python Howto">Python Howto</a></li>
       <li class="none"><a href="../howto/security-howto.html" title="Security Howto">Security Howto</a></li>
       <li class="none"><a href="../howto/services-howto.html" title="Services Howto">Services Howto</a></li>
       <li class="none"><a href="../howto/url-rewriting-howto.html" title="URL rewriting Howto">URL rewriting Howto</a></li>
       <li class="none"><a href="../howto/context-howto.html" title="Velocity Context Howto">Velocity Context Howto</a></li>
       <li class="none"><a href="../howto/velocity-site-howto.html" title="Velocity Site Howto">Velocity Site Howto</a></li>
       <li class="none"><a href="../howto/velocityonlylayout-howto.html" title="VelocityOnlyLayout Howto">VelocityOnlyLayout Howto</a></li>
      </ul></li>
     <li class="none"><a href="http://wiki.apache.org/turbine/FrontPage" class="externalLink" title="Wiki">Wiki</a></li>
     <li class="none"><a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a></li>
    </ul>
       <h5>Development</h5>
    <ul>
     <li class="none"><a href="../proposals.html" title="Proposals">Proposals</a></li>
     <li class="none"><a href="../how-to-help.html" title="How To Help">How To Help</a></li>
     <li class="none"><a href="../todo.html" title="Todo">Todo</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
       <h5>Apache</h5>
    <ul>
     <li class="none"><a href="http://www.apache.org/" class="externalLink" title="Apache Website">Apache Website</a></li>
     <li class="none"><a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
     <li class="none"><a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a></li>
     <li class="none"><a href="http://www.apache.org/security/" class="externalLink" title="Security">Security</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">


 

<div class="section">
<h2><a name="Using_the_pull_model_with_Turbine_2"></a>Using the pull model with Turbine 2</h2>


<p>
Turbine 2 can be used with two different programming models - the push model
and the pull model.  The difference is in how the Context is built up.  The
Context is used by the Velocity or WebMacro template files to &quot;fill in the
blanks&quot; and introduce dynamic data into a static HTML-based template.  This
programming concept is incredibly powerful - because it allows the web
designer, who may be experienced with HTML, CSS, and Javascript but not
Java, to put data fields wherever they want on a page without having to ask
the Java programmers to change a Java class and recompile.  For more
information on which to choose for your Turbine application, read Jon
Stevens' informative commentary <a href="../pullmodel.html">Push vs
Pull</a>.
</p>


<p>
Also see the <a href="../services/pull-service.html">Pull Service</a>
Documentation
for another explanation of how the Pull Service works with Tools.
</p>


<p>
The push model is based on a one-to-one mapping of Java Screen
classes and Velocity template files.  The Screen class puts key/value pairs
into the Context.  The <a href="context-howto.html">Context Howto</a>
explains this approach.
</p>


<p>
The pull model allows the web designer even more freedom than the push
model. Java programmers can create globally accessible Java classes known as
Tools.   These Tools are going to be useful for getting data out of a
service and bringing it to the presentation layer, authenticating users, or
creating links (see the TemplateLink tool that is built into Turbine).
</p>
</div>


<div class="section">
<h2><a name="Pull_Tool_Implementation"></a>Pull Tool Implementation</h2>

<p>
Your SimpleSecurityTool should implement ApplicationTool, which is a simple
interface with two methods, init(Object data) and refresh.  It could be a
facade class that calls other classes, or it could have its own business
logic.
</p>
</div>


<div class="section">
<h2><a name="Entries_in_TurbineResources.properties"></a>Entries in TurbineResources.properties</h2>

<p>
To make the Tool available to Turbine, you need to define your Tools in the
TurbineResources.properties file.  The &quot;Pull Service&quot; section of the
properties file is where the tools are listed.  You can use the following
syntax (all explained in the TurbineResources.properties):
</p>



<div class="source">
<pre>
tool.&lt;Scope&gt;.&lt;Id&gt; = &lt;Classname&gt;

tool.request.formsTool = com.yourcompany.turbine.tools.SimpleFormsTool
</pre></div>


<p>
Classname is your java classname -
com.yourcompany.turbine.tools.SimpleFormsTool
</p>


<p>
Id is a unique identifier that you will use in your Velocity templates -
formsTool, for instance.
</p>


<p>
Scope defines the life cycle of the Tool.  There are four, global, request,
session, and persistent.
</p>


<p>
Global: The tool is instantiated once and is available to all templates for
all requests. Must be threadsafe.
</p>


<p>
Request: The tool is instantiated once for every request to Turbine.
Doesn't need to be threadsafe.  The link, page, and flux tools are all
defined as request scope.
</p>


<p>
Session: The tool is instantiated once for each user session. Should be
threadsafe.  Useful for tools that might hold user profiles, or items in a
shopping cart.
</p>


<p>
Persistent: Tool is instantiated once for each user session, and is stored
along with the user information.  Must be threadsafe and implement
Serializable.  An example of how this scope would be used would be great!
</p>


<p>
Additional tool-defined properties can be configured in the
TurbineResources.properties. The syntax is defined under the &quot;Pull Service&quot;
section.
</p>

</div>



      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2000&#x2013;2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
All rights reserved.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>