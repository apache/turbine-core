<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Turbine - Pull Model Howto</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Jeff Linwood"></meta><meta name="email" content="jeff@greenninja.com"></meta></head><body class="composite"><div id="banner"><a href="http://turbine.apache.org/" id="organizationLogo"><img alt="Apache Software Foundation" src="../images/turbine-project.png"></img></a><a href="http://turbine.apache.org/turbine/turbine-2.3.3/index.html" id="projectLogo"><img alt="turbine-2" src="../images/logo.gif"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 21 November 2008
                <span class="separator">|</span> Doc for  2.3.3
                </div><div class="xright">
        
        <a href="http://turbine.apache.org/">Turbine Home</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/fulcrum/">Fulcrum</a>
      
        
          
            <span class="separator">|</span>
          
        
        <a href="http://turbine.apache.org/meta/">META</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menuGeneral_Information"><h5>General Information</h5><ul><li class="none"><a href="../index.html">Overview</a></li><li class="none"><a href="../features.html">Features</a></li><li class="none"><a href="../fsd.html">Specification</a></li><li class="none"><a href="../getting-started.html">Getting Started</a></li></ul></div><div id="menuDocumentation"><h5>Documentation</h5><ul><li class="none"><a href="../changes-report.html">Changes</a></li><li class="none"><a href="../turbine-schema.html">Core DB Schema</a></li><li class="collapsed"><a href="../services/index.html">Services</a></li><li class="expanded"><a href="../howto/index.html">Howtos</a><ul><li class="none"><a href="../howto/action-event-howto.html">Action Events Howto</a></li><li class="none"><a href="../howto/configuration-howto.html">Configuration Howto</a></li><li class="none"><a href="../howto/extend-user-howto.html">Extend User Howto</a></li><li class="none"><a href="../howto/hibernate-howto.html">Hibernate OM Howto</a></li><li class="none"><a href="../howto/intake-howto.html">Intake Howto</a></li><li class="none"><a href="../howto/jboss-howto.html">JBoss Howto</a></li><li class="none"><a href="../howto/jsp-howto.html">JSP Howto</a></li><li class="none"><a href="../howto/migrate-from-2_1-howto.html">Migrating 2.1 to 2.2</a></li><li class="none"><a href="../howto/migrate-from-2_2-howto.html">Migrating 2.2 to 2.3</a></li><li class="none"><strong><a href="../howto/pullmodel-howto.html">Pull Model Howto</a></strong></li><li class="none"><a href="../howto/python-howto.html">Python Howto</a></li><li class="none"><a href="../howto/security-howto.html">Security Howto</a></li><li class="none"><a href="../howto/services-howto.html">Services Howto</a></li><li class="none"><a href="../howto/sql-howto.html">How to build the SQL files</a></li><li class="none"><a href="../howto/url-rewriting-howto.html">URL rewriting Howto</a></li><li class="none"><a href="../howto/context-howto.html">Velocity Context Howto</a></li><li class="none"><a href="../howto/velocity-site-howto.html">Velocity Site Howto</a></li><li class="none"><a href="../howto/velocityonlylayout-howto.html">VelocityOnlyLayout Howto</a></li><li class="none"><a href="http://wiki.apache.org/turbine/Turbine2" class="externalLink" title="External Link">Wiki Howtos</a></li></ul></li><li class="none"><a href="../apidocs/index.html">JavaDocs</a></li></ul></div><div id="menuDevelopment"><h5>Development</h5><ul><li class="none"><a href="../proposals.html">Proposals</a></li><li class="none"><a href="../how-to-help.html">How To Help</a></li><li class="none"><a href="../todo.html">Todo</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="../development-process.html">Development Process</a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/mavenlogo_builtby_w.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Using_the_pull_model_with_Turbine_2"></a><h2>Using the pull model with Turbine 2</h2>

<p>
Turbine 2 can be used with two different programming models - the push model
and the pull model.  The difference is in how the Context is built up.  The
Context is used by the Velocity or WebMacro template files to "fill in the
blanks" and introduce dynamic data into a static HTML-based template.  This
programming concept is incredibly powerful - because it allows the web
designer, who may be experienced with HTML, CSS, and Javascript but not
Java, to put data fields wherever they want on a page without having to ask
the Java programmers to change a Java class and recompile.  For more
information on which to choose for your Turbine application, read Jon
Stevens' informative commentary <a href="../pullmodel.html">Push vs
Pull</a>.
</p>

<p>
Also see the <a href="../services/pull-service.html">Pull Service</a>
Documentation
for another explanation of how the Pull Service works with Tools.
</p>

<p>
The push model is found in the Flux/NewApp application that is distributed
with the TDK 2.1.  It is based on a one-to-one mapping of Java Screen
classes and Velocity template files.  The Screen class puts key/value pairs
into the Context.  The <a href="context-howto.html">Context Howto</a>
explains this approach.
</p>

<p>
The pull model allows the web designer even more freedom than the push
model. Java programmers can create globally accessible Java classes known as
Tools.   These Tools are going to be useful for getting data out of a
service and bringing it to the presentation layer, authenticating users, or
creating links (see the TemplateLink tool that is built into Turbine).
</p>
</div><div class="section"><a name="Pull_Tool_Implementation"></a><h2>Pull Tool Implementation</h2>
<p>
Your SimpleSecurityTool should implement ApplicationTool, which is a simple
interface with two methods, init(Object data) and refresh.  It could be a
facade class that calls other classes, or it could have its own business
logic.
</p>
</div><div class="section"><a name="Entries_in_TurbineResources_properties"></a><h2>Entries in TurbineResources.properties</h2>
<p>
To make the Tool available to Turbine, you need to define your Tools in the
TurbineResources.properties file.  The "Pull Service" section of the
properties file is where the tools are listed.  You can use the following
syntax (all explained in the TurbineResources.properties):
</p>



    <div class="source"><pre>
tool.&lt;Scope&gt;.&lt;Id&gt; = &lt;Classname&gt;

tool.request.formsTool = com.yourcompany.turbine.tools.SimpleFormsTool
</pre></div>
  

<p>
Classname is your java classname -
com.yourcompany.turbine.tools.SimpleFormsTool
</p>

<p>
Id is a unique identifier that you will use in your Velocity templates -
formsTool, for instance.
</p>

<p>
Scope defines the life cycle of the Tool.  There are four, global, request,
session, and persistent.
</p>

<p>
Global: The tool is instantiated once and is available to all templates for
all requests. Must be threadsafe.
</p>

<p>
Request: The tool is instantiated once for every request to Turbine.
Doesn't need to be threadsafe.  The link, page, and flux tools are all
defined as request scope.
</p>

<p>
Session: The tool is instantiated once for each user session. Should be
threadsafe.  Useful for tools that might hold user profiles, or items in a
shopping cart.
</p>

<p>
Persistent: Tool is instantiated once for each user session, and is stored
along with the user information.  Must be threadsafe and implement
Serializable.  An example of how this scope would be used would be great!
</p>

<p>
Additional tool-defined properties can be configured in the
TurbineResources.properties. The syntax is defined under the "Pull Service"
section.
</p>

</div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2000-2008, Apache Software Foundation</div><div class="clear"><hr></hr></div></div></body></html>