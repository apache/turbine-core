<?xml version="1.0"?>

<document>

<properties>
  <title>2.x Changes</title>
  <author email="jvanzyl@apache.org">Jason van Zyl</author>
  <author email="jmcnally@apache.org">John D. McNally</author>
  <author email="mpoeschl@marmot.at">Martin Poeschl</author>
  <author email="hps@intermeta.de">Henning P. Schmiedehausen</author>
  <author email="quintonm@bellsouth.net">Quinton McCombs</author>
</properties>

<body>

<!--
<section name="Turbine 2.2-b2">

<p>
Changes between Turbine 2.2-b1 and 2.2-b2.
</p>

<p>
</p>

<subsection name="Changes that could break older environments">
<p>
  <ul>
    <li>
    </li>
  </ul>
</p>
</subsection>


<subsection name="Other changes">
<p>
  <ul>
    <li>
    </li>
  </ul>
</p>
</subsection>

<subsection name="Fixed bugs">
<p>
  <ul>
    <li>
    </li>
  </ul>
</p>
</subsection>
</section>
-->

<section name="Turbine 2.3-dev">

<p>
Changes between Turbine 2.2 and 2.3-dev.
</p>

<subsection name="Changes that could break older environments">
<p>
  <ul>
    <li>
      AccessControlList is now an interface and its implementation is in
      TurbineAccessControlList. This is now configurable and can be replaced
      by a custom AccessControlList implementation. If older compiled code
      suddently throws IncompatibleClassChange errors, just recompile and
      they go away.
    </li>
    <li>
      removed all deprecated java code (incl. support for webmacro, freemarker
      and castor). Make sure to not get any deprecation warnings before you
      switch to 2.3!
    </li>
    <li>
      removed the LoggingService. Deprecated everything in the utils.Log class.
    </li>
    <li>
       removed the TurbineResources Service.
    </li>
    <li>
       the service initialization code has been changed. This is important if
       you write services yourself. You should supply a constructor which takes
       no parameters. The usage of a constructor which takes a RunData object
       is deprecated and might be removed later. If you're using the supplied
       services, you shouldn't notice any change.
    </li>
  </ul>
</p>
</subsection>


<subsection name="Other changes">
<p>
  <ul>
    <li>
      Backported the Crypto Service from Fulcrum.
    </li>
    <li>
      TTWS24: With this patch LDAP security services can have users, groups,
      roles and permissions in the LDAP repository. It also works with users in
      LDAP and the rest in the Database. <br/>
      Sample configuration files for Openldap can be found
      <a href="http://cvs.apache.org/viewcvs/jakarta-turbine-2/conf/openldap/">
      here</a>
    </li>
    <li>
      added new Logging code which uses commons-logging everywhere.
    </li>
    <li>
       added new Configuration code based on commons-configuration. Switched
       all configuration requests to commons-configuration.
    </li>
    <li>
      added Log4j configuration and startup.
    </li>
    <li>
      removed all remaining Torque code.
    </li>
    <li>
      VelocityLayout is now the proposed default layout.
      VelocityECSLayout might go away post-2.3.
    </li>
    <li>
      TurbineException, TurbineRuntimeException, and TurbineError all extend
      the corresponding "Nestable" exception type from commons-lang.
    </li>
    <li>
      VelocityHtmlMail can now be used in a scheduled job.  It has a new constructor
      accepting a velocity contexrt object.
    </li>
    <li>
      Intake changes:
      <ul>
        <li>
          Backported changes from Fulcrum version
        </li>
        <li>
          IntakeException is now thrown from intake methods instead of
          TurbineException and Exception.
        </li>
        <li>
          Multiple XML definition files can be used.
        </li>
        <li>
          Logging has been improved to give more information when an
          error occurs.
        </li>
        <li>
          The DTD has been updated and fully documented!
        </li>
        <li>
          Intake now uses commons-pool for pooling.
        </li>
        <li>
          intake.dtd is now packaged in the turbine.jar file.  If your
          intake.xml file validates against 
          jakarta.apache.org/turbine/dtd/intake.dtd, then the DTD included
          in the jar file will be used instead of the online version. 
        </li>
      </ul>
    </li>
    <li>
        All deprecated calls to the old org.apache.turbine.util.Log have
        been replaced with calls to org.apache.commons.logging.Log.
    </li>
    <li>
        A new SessionService has been added.  This will allow access to all
        sessions in the current context.
    </li>
  </ul>
</p>
</subsection>

<subsection name="Fixed bugs">
<p>
  <ul>
    <li>
      TTWS25: Removed deprecated call to TurbineDB
    </li>
    <li>
      TRQD10: Extending Turbine User How-to for T2.2
    </li>
    <li>
      TTWS20: Intake can not set mapped attributes to null.
    </li>
  </ul>
</p>
</subsection>
</section>

<section name="Turbine 2.2 (= 2.2-rc2)">
<p>
Changes between Turbine 2.2-rc1 and 2.2.
</p>

<subsection name="Other changes">
<p>
  <ul>
    <li>
      TTWS1: TemplatePageAttributes enhancements
    </li>
    <li>
      TTWS5: Reference support for DynamicURI
    </li>
    <li>
      TTWS13: IntakeTool.getGroups() should be public
    </li>
  </ul>
</p>
</subsection>
</section>

<section name="Turbine 2.2-rc1">
<p>
Changes between Turbine 2.2-b2 and 2.2-rc1.
</p>

<subsection name="Other changes">
<p>
  <ul>
    <li>
      Enhancements to support Apache XML-RPC versions 1.2 alpha 1 and 2.
    </li>
  </ul>
</p>
</subsection>

<subsection name="Fixed bugs">
<p>
  <ul>
    <li>
      TRQD2: Update to intake-howto to mention remove()
    </li>
  </ul>
</p>
</subsection>
</section>

<section name="Turbine 2.2-b2">

<p>
Changes between Turbine 2.2-b1 and 2.2-b2.
</p>

<p>
<b>The coupled version of Torque has been removed from Turbine 2.2!</b> <br/>
Get a full list of changes at the
<a href="http://jakarta.apache.org/turbine/torque/changes">Torque-site</a>.
</p>

<subsection name="Changes that could break older environments">
<p>
  <ul>
    <li>
      the coupled version of torque has been removed.
    </li>
  </ul>
</p>
</subsection>


<subsection name="Other changes">
<p>
  <ul>
    <li>
      Maven is used as build system for Turbine 2.2
    </li>
    <li>
      removed antiquated redirect logic.
    </li>
    <li>
      You can use log4j properties directly.
    </li>
    <li>
      The configuration package has been moved from stratum to commons
    </li>
    <li>
      BaseValueParser.setProperty() changed from private to protected
    </li>
  </ul>
</p>
</subsection>

<subsection name="Fixed bugs">
<p>
  <ul>
    <li>
      Fixed IllegalStateException when removing an attribute from an invalid
      session (patch by David Vandegrift - dvandegrift@bluearc.com)
    </li>
    <li>
      Fixed NumberFormatException in UUIdGenerator.
    </li>
  </ul>
</p>
</subsection>
</section>


<section name="Turbine 2.2b1">

<p>
Changes between Turbine 2.1 and 2.2b1.
</p>

<p>
Torque and Fulcrum (the service framework) have been decoupled in preparation
for Turbine 3.0. The decoupled versions can be used with Turbine 2.2.
We strongly recommend to use the decoupled versions (some of the 'old' services
must be used, because they are used internally by Turbine)
</p>

<p>
If you wrote your own services you should also change them to be Fulcrum
services to make them work with Turbine 3.x
</p>

<subsection name="Changes that could break older environments">

<p>
  <ul>
    <li>
      The Service interface was extended to allow integration of Service
      implementations: <br/>
      <b>Service.getName()</b> <br/>
      since most Service implementations extend BaseService
      (which implements a public getName method), this should not be an issue.
    </li>
  </ul>
</p>

</subsection>


<subsection name="Other changes">

<p>
  <ul>
    <li>
      <b>ECS, Freemarker and Webmacro</b> services/modules are marked
      <b>deprecated</b>. You should use Velocity instead.
    </li>
    <li>
      <b>Castor</b> service is marked as <b>deprecated</b>. You should use
      om/peer classes instead!
    </li>
    <li>
      The XSLT Service is updated to use Xalan 2.0
    </li>
    <li>
      Improved datatype mappings for mysql, oracle, postgresql, sapdb
    </li>
    <li>
      adding support for DB2 on AS400 (patch by Sweaver@rippe.com).
    </li>
    <li>
      adding support for secure connections in the xmlrpc service.
    </li>
    <li>
      Added a configuration parameter to torque, addTimeStamp, that allows the
      user to generate files without a timestamp. Default is true, timestamps
      will be generated.
    </li>
    <li>
      Criteria.Criterion implements Serializable
    </li>
    <li>
      DB implements Serializable
    </li>
    <li>
      torque: id-methods <i>sequence</i> and <i>autoincrement</i> are
      <b>deprecated</b>. You should use <b>native</b>. torque uses the method
      provided by your database
    </li>
    <li>
      added static strings for ISNULL and ISNOTNULL to Criteria.
    </li>
    <li>
      added getDateString() method to format date fields to DB.
    </li>
    <li>
      added VelocityDirectLayout/Screen to make it possible to embed
      servlet/JSP outputs into a Velocity template used within Turbine.
      (patch by raphael.luta@networks.groupvu.com)
    </li>
    <li>
      added an easy to use localization pull tool.
    </li>
    <li>
      Javadocs improvements.
    </li>
    <li>
      Documentation improvements.
    </li>
  </ul>
</p>

</subsection>


<subsection name="Fixed bugs">

<p>
  <ul>

    <li>
      fixed error in Mssql unique.vm template (removed a blank line)
    </li>
    <li>
      [2301] Embedding message parts in HtmlEmail throws NullPointerException.
    </li>
    <li>
      bugfix for BigDecimal attributes with default value
    </li>
    <li>
      fixed handling of sequences for db2, oracle, postgresql, sapdb
    </li>
    <li>
      fixed syntax for create index (postgresql)
    </li>
    <li>
      fixed problem for postgres with blob style column in TurbineUser table.
      (patch by Jerome Veryleyen)
    </li>
    <li>
      BaseUnicastRemoteService.java: Corrected method name (setName -> getName).
    </li>
    <li>
      fixed Roleset.add(RoleSet) (patch by lujin@yahoo.com)
    </li>
    <li>
      fixed database - defaultIdMethod (torque)
    </li>
    <li>
      fixed date formating problem with Oracle.
    </li>
    <li>
      fixed problem when ignoreCase was used with ISNULL or ISNOTNULL.
    </li>
    <li>
      fixed Option object initialisation in SelectorBox
      (patch by Kurt Grafius kurtg@jvoom.com)
    </li>
  </ul>
</p>

</subsection>

</section>

</body>
</document>
